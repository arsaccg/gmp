#content-inside
  .row
    .col-xs-12.col-sm-7.col-md-7.col-lg-4
      %h1.page-title.txt-color-blueDark
        %i.fa.fa-pencil-square-o.fa-eye
        Orden de Suministro #
        = @deliveryOrder.id.to_s.rjust(5, '0')
  %section#widget-grid
    .row
      %article.col-sm-12.col-md-12.col-lg-12
        #wid-id-0.jarviswidget.jarviswidget-color-greenDark{"data-widget-collapsed" => "false", "data-widget-deletebutton" => "false", "data-widget-editbutton" => "false"}
          %header
            %span.widget-icon
              %i.fa.fa-table
            %h2 
            = 'Orden de Suministro N° ' + @deliveryOrder.id.to_s.rjust(5, '0')
          %div
            .jarviswidget-editbox
              / This area used as dropdown edit box
            .widget-body.no-padding
              .alert.alert-info.no-margin.fade.in
                %button.close{"data-dismiss" => "alert"}
                  ×
                %i.fa-fw.fa.fa-info
                Cabecera de la Orden de Suministro
              %table.table.table-hover
                %thead
                  %tr
                    %th Codigo
                    %th Estado
                    %th Fecha de Requerimiento
                    %th Fecha Programada
                    %th Responsable
                    %th Glosa
                %tbody(id="article_items_table")
                  %tr
                    %td
                      = @deliveryOrder.id.to_s.rjust(5, '0')
                    %td
                      = translate_delivery_order_state(@deliveryOrder.state)
                    %td
                      = @deliveryOrder.date_of_issue
                    %td
                      = @deliveryOrder.scheduled
                    %td
                      = @deliveryOrder.user.first_name + ' ' + @deliveryOrder.user.last_name
                    %td
                      = @deliveryOrder.description
      - if @state_change != nil
        %h1.page-title.txt-color-blueDark
          %i.fa.fa-pencil-square-o.fa-fw 
          Cambiar estado de la Orden
        %article.col-sm-12.col-md-12.col-lg-6
          - case @state_change
            - when 'revised'
              = link_to "Dar visto bueno", gorevise_logistics_delivery_order_path(@deliveryOrder.id), class: "btn btn-info btn-lg"
            - when 'canceled'
              = link_to "Anular", logistics_delivery_order_path(@deliveryOrder.id), class: "btn btn-danger btn-lg", method: :delete
            - when 'approved'
              = link_to "Aprobar", goapprove_logistics_delivery_order_path(@deliveryOrder.id), class: "btn btn-primary btn-lg"
      %article.col-sm-12.col-md-12.col-lg-12
        #wid-id-2.jarviswidget.jarviswidget-color-greenDark{"data-widget-collapsed" => "false", "data-widget-deletebutton" => "false", "data-widget-editbutton" => "false"}
          %header
            %span.widget-icon
              %i.fa.fa-table
            %h2 Detalle de la Orden de Suministro
          %div
            .jarviswidget-editbox
              / This area used as dropdown edit box
            .widget-body.no-padding
              .alert.alert-info.no-margin.fade.in
                %button.close{"data-dismiss" => "alert"}
                  ×
                %i.fa-fw.fa.fa-info
                Detalle de la Orden de Suministro
              %table.table.table-hover
                %thead
                  %tr
                    %th Codigo
                    %th Insumo
                    %th Cantidad
                    %th Sector
                    %th Unidad de Medida
                    %th Fases
                    %th Glosa
                %tbody(id="article_items_table")
                  - @deliveryOrderDetails.each do |deliverydetail|
                    %tr
                      %td
                        = deliverydetail.article.code
                      %td
                        = deliverydetail.article.name
                      %td
                        = deliverydetail.amount
                      %td
                        = deliverydetail.sector.name
                      %td
                        - if deliverydetail.unit_of_measurement != nil
                          = deliverydetail.unit_of_measurement.name
                        - else
                          = "No tiene Unidad de Medida"
                      %td
                        = deliverydetail.phase.name
                      %td
                        = deliverydetail.description

= javascript_include_tag 'plugin/flot/jquery.flot.cust'
= javascript_include_tag 'plugin/vectormap/jquery-jvectormap-1.2.2.min'
= javascript_include_tag 'plugin/fullcalendar/jquery.fullcalendar.min'
= javascript_include_tag 'plugin/vectormap/jquery-jvectormap-world-mill-en'
= javascript_include_tag 'plugin/flot/jquery.flot.resize'
= javascript_include_tag 'plugin/flot/jquery.flot.tooltip'
= javascript_include_tag 'plugin/datatables/jquery.dataTables-cust.min'
= javascript_include_tag 'plugin/datatables/ColReorder.min'
= javascript_include_tag 'plugin/datatables/FixedColumns.min'
= javascript_include_tag 'plugin/datatables/ColVis.min'
= javascript_include_tag 'plugin/datatables/ZeroClipboard'
= javascript_include_tag 'plugin/datatables/media/js/TableTools.min'
= javascript_include_tag 'plugin/datatables/DT_bootstrap'
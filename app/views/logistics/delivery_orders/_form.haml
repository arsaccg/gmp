#wid-id-0.jarviswidget{"data-widget-colorbutton" => "false", "data-widget-editbutton" => "false"}
  %header
    %span.widget-icon
      %i.fa.fa-eye
    %h2 Orden de Suministro
  %div
    .jarviswidget-editbox
    .widget-body 
      = simple_form_for([:logistics, @deliveryOrder], html: {class: 'form-horizontal' }) do |f|
        .col-sm-6
          %fieldset
            %legend Orden de Suministro
            - if @deliveryOrder.id != nil
              .form-group
                %label.col-md-3.control-label{for: "id"} Código
                .col-md-9= f.input :id, placeholder: "Código", :input_html => {:class => 'form-control', :value => @deliveryOrder.id.to_s.rjust(5, '0')}, label: false, readonly: true
            .form-group
              %label.col-md-3.control-label{for: "state"} Estado
              .col-md-9
                = f.input :state, placeholder: "Nombre de la Orden", :input_html => {:class => 'form-control', :value => translate_delivery_order_state(@deliveryOrder.state)}, label: false, readonly: true
            .form-group
              %label.col-md-3.control-label{for: "date_of_issue"} Fecha de Requerimiento
              .col-md-9
                = f.input :date_of_issue, placeholder: "Fecha de emisión", as: :string ,:input_html => {:class => 'form-control', type: "date"}, label: false
            .form-group
              %label.col-md-3.control-label{for: "scheduled"} Fecha Programada
              .col-md-9
                = f.input :scheduled, placeholder: "Fecha Programada", as: :string, :input_html => {:class => 'form-control', type: "date"}, label: false
            .form-group
              %label.col-md-3.control-label{for: "liable"} Responsable
              .col-md-9
                = text_field(:deliveryOrder, :liable, class: "form-control", value: "#{current_user.first_name} #{current_user.last_name}")
            .form-group
              %label.col-md-3.control-label{for: "description"} Glosa
              .col-md-9= f.input :description, placeholder: "Glosa", :input_html => {:class => 'form-control'}, label: false

        .col-sm-12
          %fieldset
            %legend Detalle de Orden de Suministro
            .form-group
              .col-lg-12
                %label(for="article_id" class="col-lg-2 control-label") Insumos
                .col-lg-6 
                  %select(name='article_id' class = 'form-control' id = 'article-select')
                    - @articles.each do |article|
                      %option(value = "#{article.id}")
                        = article.name
                .col-lg-1
                  = text_field_tag 'amount', nil, class: 'form-control', id: 'article-amount', value: '1'
                .col-lg-2 
                  %div(class="col-lg-3")
                    %a(href="javascript:add_article_item();" id="btn-add-article" class="btn btn-success" role="button")
                      Agregar Insumo
            .form-group
              .col-lg-3
              .col-lg-12
                %table(class="table table-condensed table-bordered table-striped table-hover dataTable" style="font-size: 12px;" id="summary-articles" aria-describedby="data-table_info")
                  %thead
                    %tr
                      %th Codigo
                      %th Insumo
                      %th Cantidad
                      %th Sector
                      %th Unidad de Medida
                      %th Fases
                      %th Glosa
                      %th 
                  %tbody(id="article_items_table")
        .form-actions
          .row
            .col-md-12
              %button.btn.btn-primary{type: "submit"}
                %i.fa.fa-save
                  Guardar
:javascript

  function add_article_item(){

    var article_id = $("#article-select").val();
    str_item = {authenticity_token: "#{form_authenticity_token}", article_id: $("#article-select").val(), amount: $("#article-amount").val()};

    load_url_ajax('#{add_delivery_order_item_field_logistics_delivery_orders_path}', 'article_items_table', str_item, 0, null);
  }

  function delete_item(code){
    $("#tr" + code).remove();
  }
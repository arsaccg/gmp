- @arrItems.each do |x|
  - @pending = x.amount.to_i - PurchaseOrderDetail.get_total_received(x.id).to_i
  %tr{id: "tr" + @reg_n.to_s}
    %td(style="display:none")
      = hidden_field_tag 'stock_input[stock_input_details_attributes][' + @reg_n.to_s + '][purchase_order_detail_id]', x.id.to_i
    %td
      = x.delivery_order_detail.article.code
    %td
      = x.delivery_order_detail.article.description
    %td="Kgs"
    %td.amount
      = x.amount
    %td.amount
      = @pending
    %td.unit-price
      = text_field_tag 'stock_input[stock_input_details_attributes][' + @reg_n.to_s + '][amount]', nil, class: "form-control unit-price", value: @pending, onkeypress: "return isNumber(event);", onchange: "this.value = minmax(this.value, 1, #{@pending})"
    %td{:style => "width: 1%;"}
      %a{href: "javascript:delete_item('"+@reg_n.to_s+"')"}(class="btn") X
  - @reg_n += 1
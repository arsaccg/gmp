.panel.panel-default
  .panel-heading
    %h4.panel-title
      %a{"data-parent" => "#accordion-tr", "data-toggle" => "collapse", href: "#collapse#{@reg}-1"}
        %i.fa.fa-fw.fa-plus-circle.txt-color-green
        %i.fa.fa-fw.fa-minus-circle.txt-color-red
        Nuevo Certificado
  .panel-collapse.collapse.in{ 'id'=> "collapse#{@reg}-1"}
    .panel-body
      .row
        .col-sm-4
          %label Nombre de la obra
          %select.form-control#work-select{name: "professional[certificates_attributes][#{@reg}][work_id]"}
            -if @action=="edit"
              - @work.each do |wc|
                -if @certificate.work_id==wc.id
                  %option{value: "#{wc.id}", selected:true} 
                    = "#{wc.name}"
                -else
                  %option{value: "#{wc.id}"} 
                    = "#{wc.name}"
            -else
              -@work.each do |wc|
                %option{value: "#{wc.id}"} 
                  = "#{wc.name}"
          %input#change-check{type: "checkbox", :value=> "otros"}
            = "No es una de las Obras?"
        .col-sm-4
          %label Nombre de Otra Obra
          %input#another_work.form-control{name: "professional[certificates_attributes][#{@reg}][other_work]", :disabled=>"disabled"}
        .col-sm-2
          %label Inicio de la obra: 
          %label.input
            %input#start_certificate.form-control{name:"professional[certificates_attributes][#{@reg}][start]", :disabled=>"disabled"}
        .col-sm-2
          %label Termino de la obra: 
          %label.input
            %input#finish_certificate.form-control{name: "professional[certificates_attributes][#{@reg}][end]", :disabled=>"disabled"}
      %br    
      .row
        .col-sm-4
          %label Entidad contratante
          .input-group
            %select.form-control.col.sm-4#category-select{ name: "professional[certificates_attributes][#{@reg}][entity_id]"}
              - @entities.each do |entities|
                - entities.each do |entity|
                  %option{:value => "#{entity.id}"}
                    = entity.name + ' ' + entity.paternal_surname
            %span.input-group-addon
              %i.fa.fa-gears
        .col-sm-4
          %label Cargo
          %select.form-control#work-select{name: "professional[certificates_attributes][#{@reg}][charge_id]"}
            -if @action=="edit"
              -@charge.each do |wc|
                -if @certificate.charge_id==wc.id
                  %option{value: "#{wc.id}", selected:true} 
                    = "#{wc.name}"
                -else
                  %option{value: "#{wc.id}"} 
                    = "#{wc.name}"
            -else
              -@charge.each do |wc|
                %option{value: "#{wc.id}"} 
                  = "#{wc.name}"
        .col-sm-4
          %label Cantidad de días trabajados
          .col-4
            %input#worked-day.form-control{name: "professional[certificates_attributes][#{@reg}][num_days]", :disabled=>"disabled"}
      %br
      .row
        .col-sm-2
          %a.btn.btn-primary{href: 'javascript:void(0);', :onclick => 'add_dates();'} Agregar más fechas
      %br
      .row
        .col-sm-4
          %label.col-sm-4 Fecha de Inicio:
          .col-sm-8
            -if @action == 'edit'
              .input-group
                %input#finish-worker.form-control{ name:"professional[certificates_attributes][#{@reg}][start_date]", as: :string, type:  "date", :value => "#{@certificate.start_date}"}
                %span.input-group-addon
                  %i.fa.fa-calendar
            -else
              .input-group
                %input#start-worker.form-control{ name: "professional[certificates_attributes][#{@reg}][start_date]", as: :string, type:  "date"}
                %span.input-group-addon
                  %i.fa.fa-calendar
      
        .col-sm-4
          %label.col-sm-4.control-label Fecha de Termino:
          .col-sm-8
            -if @action == 'edit'
              .input-group
                %input#finish-worker.form-control{ name:"professional[certificates_attributes][#{@reg}][finish_date]", as: :string, type:  "date", :value => "#{@certificate.finish_date}"}
                %span.input-group-addon
                  %i.fa.fa-calendar
            -else
              .input-group
                %input#finish-worker.form-control{ name:"professional[certificates_attributes][#{@reg}][finish_date]", as: :string, type:  "date"}
                %span.input-group-addon
                  %i.fa.fa-calendar
      %br
      .row
        .col-sm-12
          #new-date 
      .row
        .col-sm-6
          %label Componentes de la obra:
          %br
          .col-sm-4
            %label#get-comp
              %label.select.type-training#comp-check
      .row
        .col-sm-6
          .col-sm-4#comp{style: "display:none;"}
            -if @component !=nil
              - @component.each do |comp|
                %input{name: "professional[certificates_attributes][#{@reg}][component_work]", type: "checkbox", :value=> "#{comp.id}"}
                  = "#{comp.name}"
                %br
      %fieldset
        %legend Archivos a Adjuntar
        .row
          .col-sm-6
            %label.col-sm-2 Certificado
            .col-sm-10
              .button
                = file_field_tag "professional[certificates_attributes][#{@reg}][certificate]", class: 'btn btn-default', label: false, onchange: "this.parentNode.nextSibling.value = this.value", as: "file"
          .col-sm-6
            %label.col-sm-2 Otro
            .col-sm-10
              .button
                = file_field_tag "professional[certificates_attributes][#{@reg}][other]", class: 'btn btn-default', label: false, onchange: "this.parentNode.nextSibling.value = this.value", as: "file"


Started GET "/" for 127.0.0.1 at 2014-06-04 12:16:14 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m

ActiveRecord::PendingMigrationError (Migrations are pending; run 'rake db:migrate RAILS_ENV=development' to resolve this issue.):
  activerecord (4.0.0) lib/active_record/migration.rb:379:in `check_pending!'
  activerecord (4.0.0) lib/active_record/migration.rb:366:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__418039409__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0) lib/rails/rack/logger.rb:21:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  thin (1.6.1) lib/thin/connection.rb:82:in `block in pre_process'
  thin (1.6.1) lib/thin/connection.rb:80:in `catch'
  thin (1.6.1) lib/thin/connection.rb:80:in `pre_process'
  thin (1.6.1) lib/thin/connection.rb:55:in `process'
  thin (1.6.1) lib/thin/connection.rb:41:in `receive_data'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.3) lib/eventmachine.rb:187:in `run'
  thin (1.6.1) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.1) lib/thin/server.rb:162:in `start'
  rack (1.5.2) lib/rack/handler/thin.rb:16:in `run'
  rack (1.5.2) lib/rack/server.rb:264:in `start'
  railties (4.0.0) lib/rails/commands/server.rb:84:in `start'
  railties (4.0.0) lib/rails/commands.rb:78:in `block in <top (required)>'
  railties (4.0.0) lib/rails/commands.rb:73:in `tap'
  railties (4.0.0) lib/rails/commands.rb:73:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (0.8ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (24.6ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to CreateValuationOfEquipments (20140530152910)
  [1m[35m (179.7ms)[0m  CREATE TABLE `valuation_of_equipments` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `start_date` date, `end_date` date, `working_group` varchar(255), `valuation` float, `initial_amortization_number` float, `initial_amortization_percentage` float, `bill` float, `billigv` float, `totalbill` float, `retention` float, `detraction` float, `fuel_discount` float, `other_discount` float, `hired_amount` float, `advances` float, `accumulated_amortization` float, `balance` float, `net_payment` float, `accumulated_valuation` float, `accumulated_initial_amortization_number` float, `accumulated_bill` float, `accumulated_billigv` float, `accumulated_totalbill` float, `accumulated_retention` float, `accumulated_detraction` float, `accumulated_fuel_discount` float, `accumulated_other_discount` float, `accumulated_net_payment` float, `state` varchar(255), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140530152910')
  [1m[36m (107.5ms)[0m  [1mCOMMIT[0m
Migrating to AddCodeToValuationOfEquipment (20140530163510)
  [1m[35m (324.2ms)[0m  ALTER TABLE `valuation_of_equipments` ADD `code` varchar(255)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140530163510')
  [1m[36m (86.1ms)[0m  [1mCOMMIT[0m
Migrating to AddArticleIdToInputbybudgetanditems (20140531154309)
  [1m[35m (6256.4ms)[0m  ALTER TABLE `inputbybudgetanditems` ADD `article_id` int(11)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140531154309')
  [1m[36m (41.7ms)[0m  [1mCOMMIT[0m
Migrating to AddPhaseIdToWbsitems (20140531164133)
  [1m[35m (291.4ms)[0m  ALTER TABLE `wbsitems` ADD `phase_id` int(11)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140531164133')
  [1m[36m (106.4ms)[0m  [1mCOMMIT[0m
Migrating to AddBlockToParts (20140602011948)
  [1m[35m (321.6ms)[0m  ALTER TABLE `part_of_equipments` ADD `block` int(11)
  [1m[36m (289.7ms)[0m  [1mALTER TABLE `part_people` ADD `block` int(11)[0m
  [1m[35m (334.0ms)[0m  ALTER TABLE `part_works` ADD `block` int(11)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140602011948')
  [1m[36m (52.2ms)[0m  [1mCOMMIT[0m
Migrating to FixColumnsFromScValuation (20140602211203)
  [1m[35m (227.4ms)[0m  ALTER TABLE `sc_valuations` CHANGE `accumulated_valuation` `accumulated_valuation` float DEFAULT NULL
  [1m[36m (231.3ms)[0m  [1mALTER TABLE `sc_valuations` CHANGE `accumulated_initial_amortization_number` `accumulated_initial_amortization_number` float DEFAULT NULL[0m
  [1m[35m (250.9ms)[0m  ALTER TABLE `sc_valuations` CHANGE `accumulated_bill` `accumulated_bill` float DEFAULT NULL
  [1m[36m (352.5ms)[0m  [1mALTER TABLE `sc_valuations` CHANGE `accumulated_billigv` `accumulated_billigv` float DEFAULT NULL[0m
  [1m[35m (242.2ms)[0m  ALTER TABLE `sc_valuations` CHANGE `accumulated_totalbill` `accumulated_totalbill` float DEFAULT NULL
  [1m[36m (241.7ms)[0m  [1mALTER TABLE `sc_valuations` CHANGE `accumulated_retention` `accumulated_retention` float DEFAULT NULL[0m
  [1m[35m (339.8ms)[0m  ALTER TABLE `sc_valuations` CHANGE `accumulated_detraction` `accumulated_detraction` float DEFAULT NULL
  [1m[36m (484.5ms)[0m  [1mALTER TABLE `sc_valuations` CHANGE `accumulated_guarantee_fund1` `accumulated_guarantee_fund1` float DEFAULT NULL[0m
  [1m[35m (784.6ms)[0m  ALTER TABLE `sc_valuations` CHANGE `accumulated_guarantee_fund2` `accumulated_guarantee_fund2` float DEFAULT NULL
  [1m[36m (375.7ms)[0m  [1mALTER TABLE `sc_valuations` CHANGE `accumulated_equipment_discount` `accumulated_equipment_discount` float DEFAULT NULL[0m
  [1m[35m (253.2ms)[0m  ALTER TABLE `sc_valuations` CHANGE `accumulated_net_payment` `accumulated_net_payment` float DEFAULT NULL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140602211203')
  [1m[36m (63.0ms)[0m  [1mCOMMIT[0m
Migrating to AddFuelToPartsDetails (20140603163312)
  [1m[35m (289.2ms)[0m  ALTER TABLE `part_of_equipment_details` ADD `fuel` float
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140603163312')
  [1m[36m (63.1ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.9ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`


Started GET "/" for 127.0.0.1 at 2014-06-04 12:17:50 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by Management::CostCentersController#index as HTML
  [1m[35mManager Load (0.6ms)[0m  SELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
Completed 401 Unauthorized in 86ms


Started GET "/" for 127.0.0.1 at 2014-06-04 12:17:50 -0500
Processing by Management::CostCentersController#index as HTML
Completed 401 Unauthorized in 8ms


Started GET "/managers/sign_in" for 127.0.0.1 at 2014-06-04 12:17:50 -0500
Processing by Devise::SessionsController#new as HTML
  Rendered devise/shared/_links.erb (2.2ms)
  Rendered devise/sessions/new.haml within layouts/application (26.8ms)
Completed 200 OK in 4299ms (Views: 4293.3ms | ActiveRecord: 0.0ms)


Started POST "/managers/sign_in" for 127.0.0.1 at 2014-06-04 12:18:54 -0500
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9T1sUgUFRAssKDisL/VSonezp7F9PwtchO64cslvquI=", "manager"=>{"dni"=>"87654321@hotmail.com", "password"=>"[FILTERED]"}, "commit"=>"Iniciar Sesi√≥n"}
  [1m[36mManager Load (0.8ms)[0m  [1mSELECT `managers`.* FROM `managers` WHERE `managers`.`dni` = 87654321 AND (dni = '87654321@hotmail.com' ) ORDER BY `managers`.`id` ASC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE `managers` SET `current_sign_in_at` = '2014-06-04 17:18:54', `sign_in_count` = 2, `updated_at` = '2014-06-04 17:18:54' WHERE `managers`.`id` = 3[0m
  [1m[35m (48.6ms)[0m  COMMIT
Redirected to http://localhost:3000/
Completed 302 Found in 190ms (ActiveRecord: 50.8ms)


Started GET "/" for 127.0.0.1 at 2014-06-04 12:18:54 -0500
Processing by Management::CostCentersController#index as HTML
  [1m[36mManager Load (0.7ms)[0m  [1mSELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1[0m
  [1m[35mCostCenter Load (0.7ms)[0m  SELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND (deleted != '1') ORDER BY name ASC
  Rendered management/cost_centers/index.haml within layouts/dashboard (72.6ms)
Completed 200 OK in 193ms (Views: 147.4ms | ActiveRecord: 4.2ms)


Started GET "/management/dashboard?project=2" for 127.0.0.1 at 2014-06-04 12:20:39 -0500
Processing by Management::DashboardController#index as HTML
  Parameters: {"project"=>"2"}
  [1m[36mManager Load (0.4ms)[0m  [1mSELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1[0m
  [1m[35mCostCenter Load (0.7ms)[0m  SELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1[0m  [["id", "2"]]
  [1m[35mBudget Load (1.1ms)[0m  SELECT `budgets`.* FROM `budgets` WHERE (`type_of_budget` = 1 AND `subbudget_code` IS NOT NULL AND `project_id` = ('2')) ORDER BY `budgets`.`id` ASC LIMIT 1
Mysql2::Error: Unknown column 'project_id' in 'where clause': SELECT  `budgets`.* FROM `budgets`  WHERE (`type_of_budget` = 1 AND `subbudget_code` IS NOT NULL AND `project_id` = ('2'))  ORDER BY `budgets`.`id` ASC LIMIT 1
  [1m[36mBudget Load (0.9ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE (`type_of_budget` = 2 AND `project_id` = ('2')) ORDER BY `budgets`.`id` ASC LIMIT 1[0m
Mysql2::Error: Unknown column 'project_id' in 'where clause': SELECT  `budgets`.* FROM `budgets`  WHERE (`type_of_budget` = 2 AND `project_id` = ('2'))  ORDER BY `budgets`.`id` ASC LIMIT 1
  Rendered management/dashboard/index.haml within layouts/dashboard (35.7ms)
Completed 200 OK in 176ms (Views: 87.1ms | ActiveRecord: 8.0ms)


Started GET "/management/dashboard?project=2" for 127.0.0.1 at 2014-06-04 12:20:40 -0500
Processing by Management::DashboardController#index as HTML
  Parameters: {"project"=>"2"}
  [1m[35mManager Load (0.3ms)[0m  SELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1
  [1m[36mCostCenter Load (0.3ms)[0m  [1mSELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1  [["id", "2"]]
  [1m[36mBudget Load (0.7ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE (`type_of_budget` = 1 AND `subbudget_code` IS NOT NULL AND `project_id` = ('2')) ORDER BY `budgets`.`id` ASC LIMIT 1[0m
Mysql2::Error: Unknown column 'project_id' in 'where clause': SELECT  `budgets`.* FROM `budgets`  WHERE (`type_of_budget` = 1 AND `subbudget_code` IS NOT NULL AND `project_id` = ('2'))  ORDER BY `budgets`.`id` ASC LIMIT 1
  [1m[35mBudget Load (104.3ms)[0m  SELECT `budgets`.* FROM `budgets` WHERE (`type_of_budget` = 2 AND `project_id` = ('2')) ORDER BY `budgets`.`id` ASC LIMIT 1
Mysql2::Error: Unknown column 'project_id' in 'where clause': SELECT  `budgets`.* FROM `budgets`  WHERE (`type_of_budget` = 2 AND `project_id` = ('2'))  ORDER BY `budgets`.`id` ASC LIMIT 1
  Rendered management/dashboard/index.haml within layouts/dashboard (22.4ms)
Completed 200 OK in 189ms (Views: 75.2ms | ActiveRecord: 105.6ms)


Started GET "/management/cost_centers/2/edit" for 127.0.0.1 at 2014-06-04 12:30:45 -0500
Processing by Management::CostCentersController#edit as */*
  Parameters: {"id"=>"2"}
  [1m[36mManager Load (0.3ms)[0m  [1mSELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1[0m
  [1m[35mCostCenter Load (0.3ms)[0m  SELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1
  Rendered management/cost_centers/edit.haml (184.2ms)
Completed 200 OK in 215ms (Views: 208.2ms | ActiveRecord: 0.6ms)


Started GET "/management/wbsitems" for 127.0.0.1 at 2014-06-04 12:30:51 -0500
Processing by Management::WbsitemsController#index as */*
  [1m[36mManager Load (0.3ms)[0m  [1mSELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.4ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '11' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.4ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '12' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.5ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '13' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.4ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '14' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.3ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '15' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.4ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '16' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.4ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '17' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.3ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '18' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.3ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '19' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  Rendered management/wbsitems/index.html.haml (16.9ms)
Completed 200 OK in 63ms (Views: 33.1ms | ActiveRecord: 5.7ms)


Started GET "/management/wbsitems.json" for 127.0.0.1 at 2014-06-04 12:30:52 -0500
Processing by Management::WbsitemsController#index as JSON
  [1m[36mManager Load (0.3ms)[0m  [1mSELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '11' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.1ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '12' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.1ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '13' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.1ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '14' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.1ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '15' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.1ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '16' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '17' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.1ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '18' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.1ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '19' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (28.0ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE (codewbs LIKE '%') ORDER BY `wbsitems`.codewbs ASC[0m
Completed 200 OK in 41ms (Views: 0.2ms | ActiveRecord: 29.4ms)


Started GET "/management/wbsitems/get_items_json.json?project_id=2" for 127.0.0.1 at 2014-06-04 12:30:52 -0500
Processing by Management::WbsitemsController#get_items_json as JSON
  Parameters: {"project_id"=>"2"}
  [1m[35mManager Load (0.2ms)[0m  SELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.4ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '21' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '22' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.2ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '23' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '24' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.2ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '25' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '26' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.2ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '27' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '28' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.2ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '29' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 2.3ms)


Started GET "/management/wbsitems/add_items_to_wbs?project_id=2&type_budget=1" for 127.0.0.1 at 2014-06-04 12:30:58 -0500
Processing by Management::WbsitemsController#add_items_to_wbs as */*
  Parameters: {"project_id"=>"2", "type_budget"=>"1"}
  [1m[35mManager Load (0.2ms)[0m  SELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1
  [1m[36mBudget Load (0.6ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE (cost_center_id = '2' AND type_of_budget = '1')[0m
Mysql2::Error: Table 'arsac_logistica.itembywbses' doesn't exist: SHOW FULL FIELDS FROM `itembywbses`
Completed 500 Internal Server Error in 81ms

ActiveRecord::StatementInvalid (Mysql2::Error: Table 'arsac_logistica.itembywbses' doesn't exist: SHOW FULL FIELDS FROM `itembywbses`):
  app/controllers/management/wbsitems_controller.rb:137:in `block in add_items_to_wbs'
  app/controllers/management/wbsitems_controller.rb:136:in `add_items_to_wbs'


  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.0ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.8ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.7ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (24.3ms)


Started GET "/management/wbsitems" for 127.0.0.1 at 2014-06-04 12:35:44 -0500
Processing by Management::WbsitemsController#index as */*
  [1m[35mManager Load (0.3ms)[0m  SELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.2ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '11' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '12' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.2ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '13' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '14' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.2ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '15' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '16' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.2ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '17' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '18' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.2ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '19' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  Rendered management/wbsitems/index.html.haml (2.8ms)
Completed 200 OK in 21ms (Views: 5.4ms | ActiveRecord: 2.0ms)


Started GET "/management/wbsitems.json" for 127.0.0.1 at 2014-06-04 12:35:44 -0500
Processing by Management::WbsitemsController#index as JSON
  [1m[35mManager Load (0.3ms)[0m  SELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.5ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '11' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '12' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.2ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '13' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '14' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.3ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '15' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '16' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.2ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '17' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.3ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '18' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.3ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '19' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE (codewbs LIKE '%') ORDER BY `wbsitems`.codewbs ASC
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 2.9ms)


Started GET "/management/wbsitems/get_items_json.json?project_id=2" for 127.0.0.1 at 2014-06-04 12:35:44 -0500
Processing by Management::WbsitemsController#get_items_json as JSON
  Parameters: {"project_id"=>"2"}
  [1m[36mManager Load (0.1ms)[0m  [1mSELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '21' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.3ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '22' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.3ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '23' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.3ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '24' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.3ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '25' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.3ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '26' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.3ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '27' ORDER BY `wbsitems`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.3ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '28' ORDER BY `wbsitems`.`id` ASC LIMIT 1[0m
  [1m[35mWbsitem Load (0.2ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE `wbsitems`.`codewbs` = '29' ORDER BY `wbsitems`.`id` ASC LIMIT 1
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 2.4ms)


Started GET "/management/wbsitems/add_items_to_wbs?project_id=2&type_budget=1" for 127.0.0.1 at 2014-06-04 12:35:46 -0500
Processing by Management::WbsitemsController#add_items_to_wbs as */*
  Parameters: {"project_id"=>"2", "type_budget"=>"1"}
  [1m[36mManager Load (0.3ms)[0m  [1mSELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1[0m
  [1m[35mBudget Load (0.2ms)[0m  SELECT `budgets`.* FROM `budgets` WHERE (cost_center_id = '2' AND type_of_budget = '1')
  [1m[36mItembywbs Load (0.5ms)[0m  [1mSELECT `itembywbses`.* FROM `itembywbses` WHERE `itembywbses`.`budget_id` = 7[0m
  [1m[35mWbsitem Load (0.8ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE (codewbs LIKE '2%') ORDER BY `wbsitems`.codewbs ASC
  Rendered management/wbsitems/add_items_to_wbs.haml (15.2ms)
Completed 200 OK in 63ms (Views: 51.1ms | ActiveRecord: 4.7ms)


Started GET "/management/wbsitems/get_items_by_budget?budget_id=7" for 127.0.0.1 at 2014-06-04 12:35:46 -0500
Processing by Management::WbsitemsController#get_items_by_budget as */*
  Parameters: {"budget_id"=>"7"}
  [1m[36mManager Load (0.2ms)[0m  [1mSELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1[0m
  [1m[35mItembybudget Load (142.5ms)[0m  SELECT `itembybudgets`.* FROM `itembybudgets` WHERE `itembybudgets`.`budget_id` = 7
  [1m[36mItembywbs Load (10.1ms)[0m  [1mSELECT `itembywbses`.* FROM `itembywbses` WHERE `itembywbses`.`budget_id` = 7[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `itembywbses`.* FROM `itembywbses` WHERE `itembywbses`.`budget_id` = 7
  Rendered management/wbsitems/get_items_by_budget.haml (2345.6ms)
Completed 200 OK in 2385ms (Views: 2196.8ms | ActiveRecord: 155.8ms)


Started GET "/management/budgets/new" for 127.0.0.1 at 2014-06-04 12:38:01 -0500
Processing by Management::BudgetsController#new as */*
Completed 500 Internal Server Error in 60198ms

HTTPClient::ConnectTimeoutError (execution expired):
  lib/sqlserver/dbconnector.rb:21:in `do_query'
  app/models/budget.rb:21:in `load_dbs'
  app/controllers/management/budgets_controller.rb:31:in `new'


  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.5ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.8ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.7ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (25.3ms)


Started GET "/management/dashboard?project=2" for 127.0.0.1 at 2014-06-04 12:39:13 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by Management::DashboardController#index as HTML
  Parameters: {"project"=>"2"}
  [1m[35mManager Load (0.4ms)[0m  SELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1
  [1m[36mCostCenter Load (0.3ms)[0m  [1mSELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1  [["id", "2"]]
  [1m[36mBudget Load (0.6ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE (`type_of_budget` = 1 AND `subbudget_code` IS NOT NULL AND `project_id` = ('2')) ORDER BY `budgets`.`id` ASC LIMIT 1[0m
Mysql2::Error: Unknown column 'project_id' in 'where clause': SELECT  `budgets`.* FROM `budgets`  WHERE (`type_of_budget` = 1 AND `subbudget_code` IS NOT NULL AND `project_id` = ('2'))  ORDER BY `budgets`.`id` ASC LIMIT 1
  [1m[35mBudget Load (0.5ms)[0m  SELECT `budgets`.* FROM `budgets` WHERE (`type_of_budget` = 2 AND `project_id` = ('2')) ORDER BY `budgets`.`id` ASC LIMIT 1
Mysql2::Error: Unknown column 'project_id' in 'where clause': SELECT  `budgets`.* FROM `budgets`  WHERE (`type_of_budget` = 2 AND `project_id` = ('2'))  ORDER BY `budgets`.`id` ASC LIMIT 1
  Rendered management/dashboard/index.haml within layouts/dashboard (30.0ms)
Completed 200 OK in 1918ms (Views: 1656.5ms | ActiveRecord: 11.5ms)


Started GET "/management/budgets/get_budget_by_project?project_id=2" for 127.0.0.1 at 2014-06-04 12:39:28 -0500
Processing by Management::BudgetsController#get_budget_by_project as */*
  Parameters: {"project_id"=>"2"}
  [1m[36mBudget Load (0.7ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE (type_of_budget = '0' AND cost_center_id = '2' )[0m
  [1m[35m (476.8ms)[0m  SELECT get_total_cost('', '1')
  [1m[36m (85.6ms)[0m  [1mSELECT get_total_cost('', '2')[0m
  [1m[35m (419.9ms)[0m  SELECT get_total_cost('', '3')
  [1m[36m (1218.0ms)[0m  [1mSELECT get_total_cost('', '4')[0m
  [1m[35m (35.7ms)[0m  SELECT get_total_cost('', '5')
  [1m[36m (20.3ms)[0m  [1mSELECT get_total_cost('', '6')[0m
  [1m[35mBudget Load (0.6ms)[0m  SELECT `budgets`.* FROM `budgets` WHERE (type_of_budget = '1' AND cost_center_id = '2' )
  [1m[36m (439.0ms)[0m  [1mSELECT get_total_cost('', '7')[0m
  Rendered management/budgets/get_budget_by_project.haml (2894.3ms)
Completed 200 OK in 2903ms (Views: 204.3ms | ActiveRecord: 2696.6ms)


Started GET "/management/wbsitems/set_gantt?project_id=2" for 127.0.0.1 at 2014-06-04 12:39:56 -0500
Processing by Management::WbsitemsController#set_gantt as */*
  Parameters: {"project_id"=>"2"}
  [1m[35mManager Load (0.4ms)[0m  SELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.4ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE (codewbs LIKE '2%') ORDER BY `wbsitems`.codewbs ASC[0m
  Rendered management/wbsitems/_table_gantt.haml (13.0ms)
  Rendered management/wbsitems/set_gantt.haml (22.5ms)
Completed 200 OK in 60ms (Views: 48.3ms | ActiveRecord: 3.4ms)


Started GET "/administration/inputcategories/feo_of_work?budget_sale=&budget_goal=&project_id=2" for 127.0.0.1 at 2014-06-04 12:41:07 -0500
Processing by Administration::InputcategoriesController#feo_of_work as */*
  Parameters: {"budget_sale"=>"", "budget_goal"=>"", "project_id"=>"2"}
  [1m[35mBudget Load (0.7ms)[0m  SELECT `budgets`.* FROM `budgets` WHERE `budgets`.`id` = 0 LIMIT 1
  [1m[36mBudget Load (0.5ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE ('cost_center_id') ORDER BY `budgets`.`id` DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `budgets`.* FROM `budgets` WHERE `budgets`.`id` = 0 LIMIT 1  [["id", ""]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE ('cost_center_id') ORDER BY `budgets`.`id` DESC LIMIT 1[0m
Completed 500 Internal Server Error in 24ms

NoMethodError (undefined method `id' for nil:NilClass):
  app/controllers/administration/inputcategories_controller.rb:23:in `feo_of_work'


  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (0.7ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.8ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (23.5ms)


Started GET "/management/wbsitems/showbymonth_gantt?project_id=2" for 127.0.0.1 at 2014-06-04 12:42:20 -0500
Processing by Management::WbsitemsController#showbymonth_gantt as */*
  Parameters: {"project_id"=>"2"}
  [1m[35mManager Load (0.3ms)[0m  SELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.3ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE (codewbs LIKE '2%') ORDER BY `wbsitems`.codewbs ASC[0m
  [1m[35mWbsitem Load (0.8ms)[0m  SELECT `wbsitems`.* FROM `wbsitems` WHERE (codewbs LIKE '2%') AND (start_date IS NOT NULL) ORDER BY `start_date` ASC, `wbsitems`.codewbs ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT MIN(`wbsitems`.`start_date`) AS min_id FROM `wbsitems` WHERE (codewbs LIKE '2%') AND (start_date IS NOT NULL)[0m
  [1m[35m (0.5ms)[0m  SELECT MAX(`wbsitems`.`end_date`) AS max_id FROM `wbsitems` WHERE (codewbs LIKE '2%') AND (end_date IS NOT NULL)
  Rendered management/wbsitems/showbymonth_gantt.html.haml (20.6ms)
Completed 500 Internal Server Error in 31ms

ActionView::Template::Error (undefined method `start_date' for nil:NilClass):
    27:               - last_d = @wbsitems.where("end_date IS NOT NULL").maximum(:end_date) 
    28:               - d_months = difference_days(first_d, last_d)/30
    29:               - duration = d_months.to_i+1
    30:               - f_month = in_order.start_date 
    31: 
    32:               - for i in 0..(duration-1)
    33:                 %th
  app/views/management/wbsitems/showbymonth_gantt.html.haml:30:in `block in _app_views_management_wbsitems_showbymonth_gantt_html_haml___350226139_94610920'
  app/views/management/wbsitems/showbymonth_gantt.html.haml:19:in `_app_views_management_wbsitems_showbymonth_gantt_html_haml___350226139_94610920'
  app/controllers/management/wbsitems_controller.rb:298:in `showbymonth_gantt'


  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (21.9ms)


Started GET "/management/dashboard?project=2" for 127.0.0.1 at 2014-06-04 12:42:22 -0500
Processing by Management::DashboardController#index as HTML
  Parameters: {"project"=>"2"}
  [1m[36mManager Load (0.3ms)[0m  [1mSELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1[0m
  [1m[35mCostCenter Load (0.3ms)[0m  SELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1[0m  [["id", "2"]]
  [1m[35mBudget Load (85.7ms)[0m  SELECT `budgets`.* FROM `budgets` WHERE (`type_of_budget` = 1 AND `subbudget_code` IS NOT NULL AND `project_id` = ('2')) ORDER BY `budgets`.`id` ASC LIMIT 1
Mysql2::Error: Unknown column 'project_id' in 'where clause': SELECT  `budgets`.* FROM `budgets`  WHERE (`type_of_budget` = 1 AND `subbudget_code` IS NOT NULL AND `project_id` = ('2'))  ORDER BY `budgets`.`id` ASC LIMIT 1
  [1m[36mBudget Load (1.6ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE (`type_of_budget` = 2 AND `project_id` = ('2')) ORDER BY `budgets`.`id` ASC LIMIT 1[0m
Mysql2::Error: Unknown column 'project_id' in 'where clause': SELECT  `budgets`.* FROM `budgets`  WHERE (`type_of_budget` = 2 AND `project_id` = ('2'))  ORDER BY `budgets`.`id` ASC LIMIT 1
  Rendered management/dashboard/index.haml within layouts/dashboard (3.8ms)
Completed 200 OK in 156ms (Views: 58.3ms | ActiveRecord: 88.0ms)


Started GET "/management/wbsitems/set_gantt?project_id=2" for 127.0.0.1 at 2014-06-04 12:42:28 -0500
Processing by Management::WbsitemsController#set_gantt as */*
  Parameters: {"project_id"=>"2"}
  [1m[35mManager Load (0.2ms)[0m  SELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1
  [1m[36mWbsitem Load (0.2ms)[0m  [1mSELECT `wbsitems`.* FROM `wbsitems` WHERE (codewbs LIKE '2%') ORDER BY `wbsitems`.codewbs ASC[0m
  Rendered management/wbsitems/_table_gantt.haml (2.0ms)
  Rendered management/wbsitems/set_gantt.haml (3.9ms)
Completed 200 OK in 10ms (Views: 4.9ms | ActiveRecord: 0.5ms)


Started GET "/management/budgets/get_budget_by_project?project_id=2" for 127.0.0.1 at 2014-06-04 12:42:30 -0500
Processing by Management::BudgetsController#get_budget_by_project as */*
  Parameters: {"project_id"=>"2"}
  [1m[35mBudget Load (0.2ms)[0m  SELECT `budgets`.* FROM `budgets` WHERE (type_of_budget = '0' AND cost_center_id = '2' )
  [1m[36m (242.6ms)[0m  [1mSELECT get_total_cost('', '1')[0m
  [1m[35m (85.1ms)[0m  SELECT get_total_cost('', '2')
  [1m[36m (420.7ms)[0m  [1mSELECT get_total_cost('', '3')[0m
  [1m[35m (1216.1ms)[0m  SELECT get_total_cost('', '4')
  [1m[36m (33.6ms)[0m  [1mSELECT get_total_cost('', '5')[0m
  [1m[35m (18.9ms)[0m  SELECT get_total_cost('', '6')
  [1m[36mBudget Load (0.3ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE (type_of_budget = '1' AND cost_center_id = '2' )[0m
  [1m[35m (417.6ms)[0m  SELECT get_total_cost('', '7')
  Rendered management/budgets/get_budget_by_project.haml (2449.4ms)
Completed 200 OK in 2457ms (Views: 20.7ms | ActiveRecord: 2435.1ms)


Started GET "/management/budgets/administrate_budget?project_id=2" for 127.0.0.1 at 2014-06-04 12:42:34 -0500
Processing by Management::BudgetsController#administrate_budget as */*
  Parameters: {"project_id"=>"2"}
  [1m[36mCostCenter Load (0.3ms)[0m  [1mSELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1[0m
Completed 500 Internal Server Error in 3ms

NoMethodError (undefined method `valorizations' for #<CostCenter:0xbb5fc38>):
  app/controllers/management/budgets_controller.rb:99:in `administrate_budget'


  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (0.8ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (21.9ms)


Started GET "/management/dashboard?project=2" for 127.0.0.1 at 2014-06-04 12:44:21 -0500
Processing by Management::DashboardController#index as HTML
  Parameters: {"project"=>"2"}
  [1m[35mManager Load (0.3ms)[0m  SELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1
  [1m[36mCostCenter Load (0.2ms)[0m  [1mSELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1  [["id", "2"]]
  [1m[36mBudget Load (95.8ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE (`type_of_budget` = 1 AND `subbudget_code` IS NOT NULL AND `project_id` = ('2')) ORDER BY `budgets`.`id` ASC LIMIT 1[0m
Mysql2::Error: Unknown column 'project_id' in 'where clause': SELECT  `budgets`.* FROM `budgets`  WHERE (`type_of_budget` = 1 AND `subbudget_code` IS NOT NULL AND `project_id` = ('2'))  ORDER BY `budgets`.`id` ASC LIMIT 1
  [1m[35mBudget Load (1.7ms)[0m  SELECT `budgets`.* FROM `budgets` WHERE (`type_of_budget` = 2 AND `project_id` = ('2')) ORDER BY `budgets`.`id` ASC LIMIT 1
Mysql2::Error: Unknown column 'project_id' in 'where clause': SELECT  `budgets`.* FROM `budgets`  WHERE (`type_of_budget` = 2 AND `project_id` = ('2'))  ORDER BY `budgets`.`id` ASC LIMIT 1
  Rendered management/dashboard/index.haml within layouts/dashboard (3.4ms)
Completed 200 OK in 163ms (Views: 54.9ms | ActiveRecord: 98.1ms)


Started GET "/administration/inputcategories/feo_of_work?budget_sale=&budget_goal=&project_id=2" for 127.0.0.1 at 2014-06-04 12:44:29 -0500
Processing by Administration::InputcategoriesController#feo_of_work as */*
  Parameters: {"budget_sale"=>"", "budget_goal"=>"", "project_id"=>"2"}
  [1m[36mBudget Load (0.3ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE `budgets`.`id` = 0 LIMIT 1[0m
  [1m[35mBudget Load (0.6ms)[0m  SELECT `budgets`.* FROM `budgets` WHERE ('cost_center_id') ORDER BY `budgets`.`id` DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE `budgets`.`id` = 0 LIMIT 1[0m  [["id", ""]]
  [1m[35mCACHE (0.0ms)[0m  SELECT `budgets`.* FROM `budgets` WHERE ('cost_center_id') ORDER BY `budgets`.`id` DESC LIMIT 1
Completed 500 Internal Server Error in 5ms

NoMethodError (undefined method `id' for nil:NilClass):
  app/controllers/administration/inputcategories_controller.rb:23:in `feo_of_work'


  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (0.7ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (21.5ms)


Started GET "/management/valorizations?project_id=2" for 127.0.0.1 at 2014-06-04 12:45:18 -0500
Processing by Management::ValorizationsController#index as */*
  Parameters: {"project_id"=>"2"}
  [1m[36mBudget Load (0.9ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE `budgets`.`project_id` = '2'[0m
Mysql2::Error: Unknown column 'budgets.project_id' in 'where clause': SELECT `budgets`.* FROM `budgets`  WHERE `budgets`.`project_id` = '2'
  Rendered management/valorizations/index.haml (14.6ms)
Completed 500 Internal Server Error in 31ms

ActionView::Template::Error (Mysql2::Error: Unknown column 'budgets.project_id' in 'where clause': SELECT `budgets`.* FROM `budgets`  WHERE `budgets`.`project_id` = '2'):
    1: %br
    2: - @budgets.each do |item|
    3:   %blockquote
    4:     = item.description
    5:   %table(class="table table-bordered table-hover table-condensed white-table" width="100%")
  app/views/management/valorizations/index.haml:2:in `_app_views_management_valorizations_index_haml__955390746_98216900'
  app/controllers/management/valorizations_controller.rb:6:in `index'


  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (18.3ms)


Started GET "/management/dashboard?project=2" for 127.0.0.1 at 2014-06-04 12:45:21 -0500
Processing by Management::DashboardController#index as HTML
  Parameters: {"project"=>"2"}
  [1m[35mManager Load (0.3ms)[0m  SELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1
  [1m[36mCostCenter Load (0.3ms)[0m  [1mSELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1  [["id", "2"]]
  [1m[36mBudget Load (1.0ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE (`type_of_budget` = 1 AND `subbudget_code` IS NOT NULL AND `project_id` = ('2')) ORDER BY `budgets`.`id` ASC LIMIT 1[0m
Mysql2::Error: Unknown column 'project_id' in 'where clause': SELECT  `budgets`.* FROM `budgets`  WHERE (`type_of_budget` = 1 AND `subbudget_code` IS NOT NULL AND `project_id` = ('2'))  ORDER BY `budgets`.`id` ASC LIMIT 1
  [1m[35mBudget Load (0.8ms)[0m  SELECT `budgets`.* FROM `budgets` WHERE (`type_of_budget` = 2 AND `project_id` = ('2')) ORDER BY `budgets`.`id` ASC LIMIT 1
Mysql2::Error: Unknown column 'project_id' in 'where clause': SELECT  `budgets`.* FROM `budgets`  WHERE (`type_of_budget` = 2 AND `project_id` = ('2'))  ORDER BY `budgets`.`id` ASC LIMIT 1
  Rendered management/dashboard/index.haml within layouts/dashboard (3.3ms)
Completed 200 OK in 65ms (Views: 54.3ms | ActiveRecord: 2.4ms)


Started GET "/management/valorizations?project_id=2" for 127.0.0.1 at 2014-06-04 12:45:28 -0500
Processing by Management::ValorizationsController#index as */*
  Parameters: {"project_id"=>"2"}
  [1m[36mBudget Load (0.7ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE `budgets`.`project_id` = '2'[0m
Mysql2::Error: Unknown column 'budgets.project_id' in 'where clause': SELECT `budgets`.* FROM `budgets`  WHERE `budgets`.`project_id` = '2'
  Rendered management/valorizations/index.haml (6.7ms)
Completed 500 Internal Server Error in 14ms

ActionView::Template::Error (Mysql2::Error: Unknown column 'budgets.project_id' in 'where clause': SELECT `budgets`.* FROM `budgets`  WHERE `budgets`.`project_id` = '2'):
    1: %br
    2: - @budgets.each do |item|
    3:   %blockquote
    4:     = item.description
    5:   %table(class="table table-bordered table-hover table-condensed white-table" width="100%")
  app/views/management/valorizations/index.haml:2:in `_app_views_management_valorizations_index_haml__955390746_98216900'
  app/controllers/management/valorizations_controller.rb:6:in `index'


  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (93.9ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (109.2ms)


Started GET "/administration/advances?project_id=2" for 127.0.0.1 at 2014-06-04 12:45:59 -0500
Processing by Administration::AdvancesController#index as */*
  Parameters: {"project_id"=>"2"}
Completed 500 Internal Server Error in 3ms

NameError (uninitialized constant Administration::AdvancesController::Advance):
  app/controllers/administration/advances_controller.rb:5:in `index'


  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (0.8ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/joel/.rvm/gems/ruby-2.0.0-p353@erp/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (22.8ms)


Started GET "/management/dashboard?project=2" for 127.0.0.1 at 2014-06-04 12:47:48 -0500
Processing by Management::DashboardController#index as HTML
  Parameters: {"project"=>"2"}
  [1m[35mManager Load (0.2ms)[0m  SELECT `managers`.* FROM `managers` WHERE `managers`.`id` = 3 ORDER BY `managers`.`id` ASC LIMIT 1
  [1m[36mCostCenter Load (0.2ms)[0m  [1mSELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `cost_centers`.* FROM `cost_centers` WHERE `cost_centers`.`status` = 'A' AND `cost_centers`.`id` = 2 ORDER BY name ASC LIMIT 1  [["id", "2"]]
  [1m[36mBudget Load (0.6ms)[0m  [1mSELECT `budgets`.* FROM `budgets` WHERE (`type_of_budget` = 1 AND `subbudget_code` IS NOT NULL AND `project_id` = ('2')) ORDER BY `budgets`.`id` ASC LIMIT 1[0m
Mysql2::Error: Unknown column 'project_id' in 'where clause': SELECT  `budgets`.* FROM `budgets`  WHERE (`type_of_budget` = 1 AND `subbudget_code` IS NOT NULL AND `project_id` = ('2'))  ORDER BY `budgets`.`id` ASC LIMIT 1
  [1m[35mBudget Load (0.4ms)[0m  SELECT `budgets`.* FROM `budgets` WHERE (`type_of_budget` = 2 AND `project_id` = ('2')) ORDER BY `budgets`.`id` ASC LIMIT 1
Mysql2::Error: Unknown column 'project_id' in 'where clause': SELECT  `budgets`.* FROM `budgets`  WHERE (`type_of_budget` = 2 AND `project_id` = ('2'))  ORDER BY `budgets`.`id` ASC LIMIT 1
  Rendered management/dashboard/index.haml within layouts/dashboard (3.2ms)
Completed 200 OK in 62ms (Views: 54.2ms | ActiveRecord: 1.5ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to Inputcategories (20140604193000)
  [1m[35m (77.2ms)[0m  CREATE TABLE `inputcategories` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `category_id` int(11), `level_n` int(11), `description` varchar(255), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140604193000')
  [1m[36m (45.8ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.6ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`

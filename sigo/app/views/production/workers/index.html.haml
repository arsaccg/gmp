#content-inside
  .row
    .col-xs-12.col-sm-7.col-md-7.col-lg-4
      %h1.page-title.txt-color-blueDark
        %i.fa.fa-pencil-square-o.fa-fw 
        Lista de Trabajadores
    - if flash[:notice] != nil
      .alert.alert-success.fade.in{"style" => "clear:both"}
        %button.close{"data-dismiss" => "alert"}
          ×
        %i.fa-fw.fa.fa-check
        %strong Éxito
        = flash[:notice]
    - if flash[:error] != nil
      .alert.alert-danger.fade.in{"style" => "clear:both"}
        %button.close{"data-dismiss" => "alert"}
          ×
        %i.fa-fw.fa.fa-times
        %strong Error!
        = flash[:error]
  .row
    - if @bank.present? && @article.present? && @entity.present?
      .col-sm-2
        %a#smart-mod-eg2.btn.btn-primary
          Agregar Trabajador
    - elsif @entity.blank? && @bank.blank? && @article.present?
      .col-xs-12.col-sm-7.col-md-7.col-lg-12
        .alert.alert-block.alert-danger
          %a.close(data-dismiss="alert" href="#")
            ×
          %h4.alert-heading
            %i.fa.fa-lock
              No puedes crear una Trabajador!
          %p
            Verifica si tienes, por lo menos, 1 Insumo de tipo Personal (Cod. 01) y 1 Banco
    - elsif @entity.blank?
      .col-xs-12.col-sm-7.col-md-7.col-lg-12
        .alert.alert-block.alert-danger
          %a.close(data-dismiss="alert" href="#")
            ×
          %h4.alert-heading
            %i.fa.fa-lock
              No puedes crear una Trabajador!
          %p
            Verifica si tienes, por lo menos, 1 Entidad de tipo Trabajador.
    - elsif @bank.blank?
      .col-xs-12.col-sm-7.col-md-7.col-lg-12
        .alert.alert-block.alert-danger
          %a.close(data-dismiss="alert" href="#")
            ×
          %h4.alert-heading
            %i.fa.fa-lock
              No puedes crear una Trabajador!
          %p
            Verifica si tienes, por lo menos, 1 Banco.
    - elsif @article.blank?
      .col-xs-12.col-sm-7.col-md-7.col-lg-12
        .alert.alert-block.alert-danger
          %a.close(data-dismiss="alert" href="#")
            ×
          %h4.alert-heading
            %i.fa.fa-lock
              No puedes crear una Trabajador!
          %p
            Verifica si tienes, por lo menos, 1 Insumo de tipo Personal (Cod. 01).
  %br
  .row
  #widget-grid
    .row
      %article.col-xs-12.col-sm-12.col-md-12.col-lg-12
        = render :partial => 'table'

:javascript
  $("#smart-mod-eg2").click(function(e) {
    $.SmartMessageBox({
      title : "Validación de DNI",
      content : "Por favor ingrese el DNI",
      buttons : "[Cancelar][Validar]",
      input : "text",
      placeholder : "Ingrese aqui el DNI"
    }, function(ButtonPress, Value) {
      if(ButtonPress=='Validar'){
        load_url_ajax('#{new_production_worker_path}', 'content', {company_id: '#{@company}',dni: Value}, null, 'GET');
      }
    });
    e.preventDefault();
  })
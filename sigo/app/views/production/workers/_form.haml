#wid-id-0.jarviswidget{"data-widget-colorbutton" => "false", "data-widget-editbutton" => "false"}
  %header
    %span.widget-icon
      %i.fa.fa-eye
    %h2 Trabajadores
  .widget-body
    = simple_form_for([:production, @worker], html: {class: 'form-horizontal smart-form', autocomplete: 'off' }) do |f|
      %fieldset
        .row
          .section.col.col-md-2
            %label.control-label Tipo de Trabajador
          .section.col.col-md-8
            .form-group
              .col-md-12
                -if @action == 'edit'
                  -if @worker.typeofworker=="empleado"
                    %label.radio-inline
                      %input.radiobox{:name =>'worker[typeofworker]', :type => 'radio', :value => "empleado", checked: ""}
                      %span Empleado
                    %label.radio-inline
                      %input.radiobox{:name =>'worker[typeofworker]', :type => 'radio', :value => "obrero"}
                      %span Obrero
                    %label.radio-inline
                      %input.radiobox{:name =>'worker[typeofworker]', :type => 'radio', :value => "externo"}
                      %span Externo
                  -elsif @worker.typeofworker=="obrero"
                    %label.radio-inline
                      %input.radiobox{:name =>'worker[typeofworker]', :type => 'radio', :value => "empleado"}
                      %span Empleado
                    %label.radio-inline
                      %input.radiobox{:name =>'worker[typeofworker]', :type => 'radio', :value => "obrero", checked: ""}
                      %span Obrero
                    %label.radio-inline
                      %input.radiobox{:name =>'worker[typeofworker]', :type => 'radio', :value => "externo"}
                      %span Externo
                  -elsif @worker.typeofworker=="externo"
                    %label.radio-inline
                      %input.radiobox{:name =>'worker[typeofworker]', :type => 'radio', :value => "empleado"}
                      %span Empleado
                    %label.radio-inline
                      %input.radiobox{:name =>'worker[typeofworker]', :type => 'radio', :value => "obrero"}
                      %span Obrero
                    %label.radio-inline
                      %input.radiobox{:name =>'worker[typeofworker]', :type => 'radio', :value => "externo",checked: ""}
                      %span Externo
                -else
                  %label.radio-inline
                    %input.radiobox{:name =>'worker[typeofworker]', :type => 'radio', :value => "empleado"}
                    %span Empleado
                  %label.radio-inline
                    %input.radiobox{:name =>'worker[typeofworker]', :type => 'radio', :value => "obrero"}
                    %span Obrero
                  %label.radio-inline
                    %input.radiobox{:name =>'worker[typeofworker]', :type => 'radio', :value => "externo"}
                    %span Externo
        %br
        .row{ 'style' => 'display:none' }
          %input{ 'name' => 'company_id', 'value' => "#{@company_id}", 'readonly' => true, 'style' => 'display:none' }
          %input{ 'name' => 'worker[entity_id]', 'value' => "#{@entity.id}", 'readonly' => true, 'style' => 'display:none' }
        .row
          %section.col.col-10
            %label.label Entidad Trabajador
            %label.input{for: "entity_id"}
              = text_field_tag 'worker[paternal_surname]', @entity.paternal_surname.to_s + ' ' + @entity.maternal_surname.to_s + ' ' + @entity.name.to_s, class: 'form-control', placeholder: 'Apellido Paterno', disabled: "disabled", style: "background-color: gainsboro;"
        .row
          %section.col.col-3
            %label Fecha de Nacimiento
            %input#familiar-dayofbirth.string.optional.form-control{'name'=>'date_of_birth', type: "date", :value => "#{@entity.date_of_birth}", disabled: "disabled", style: "background-color: gainsboro;"}
          %section.col.col-10
            %label.label DNI
            %label.input{for: "dni"}
              = text_field_tag 'worker[dni]', @entity.dni, class: 'form-control', placeholder: 'Apellido Paterno', disabled: "disabled", style: "background-color: gainsboro;"
          %section.col.col-10
            %label.label Carnet de Extranjeria
            %label.input{for: "alienslicense"}
              = text_field_tag 'worker[alienslicense]', @entity.alienslicense, class: 'form-control', placeholder: 'Carnet de Extranjeria', disabled: "disabled", style: "background-color: gainsboro;"
        %label.label Lugar de Nacimiento
        .row
          %section.col.col-4
            %label.label Ciudad
            %label.input{for: "city"}
              = text_field_tag 'worker[city]', @entity.city, class: 'form-control', placeholder: 'Apellido Paterno', disabled: "disabled", style: "background-color: gainsboro;"
          %section.col.col-4
            %label.label Provincia
            %label.input{for: "province"}
              = text_field_tag 'worker[province]', @entity.province, class: 'form-control', placeholder: 'Apellido Paterno', disabled: "disabled", style: "background-color: gainsboro;"
          %section.col.col-4
            %label.label Departamento
            %label.input{for: "department"}
              = text_field_tag 'worker[department]', @entity.department, class: 'form-control', placeholder: 'Apellido Paterno', disabled: "disabled", style: "background-color: gainsboro;"
        .row
          %section.col.col-4
            %label.label Email
            %label.input{for: "email"}
              %i.icon-append.fa.fa-credit-card
              = f.input :email, placeholder: "Email", input_html: { class: 'form-control' }, label: false, style: "background-color: gainsboro;"
          %section.col.col-4
            %label.label Teléfono
            %label.input{for: "phone"}
              = f.input :phone, input_html: { class: 'form-control' }, label: false, style: "background-color: gainsboro;"
          %section.col.col-4
            %label.label Celular
            %label.input{for: "cellphone"}
              = f.input :cellphone, input_html: { class: 'form-control' }, label: false
        %label.label Residencia Actual
        .row
          %section.col.col-8
            %label.label Dirección
            %label.input{for: "address"}
              = f.input :address, placeholder: "Dirección", input_html: { class: 'form-control' }, label: false
          %section.col.col-4
            %label.label País
            %label.input{for: "pais"}
              = f.input :pais, input_html: { class: 'form-control' }, label: false
        .row
          %section.col.col-4
            %label.label Distrito
            %label.input{for: "district"}
              = f.input :district, placeholder: "Email", input_html: { class: 'form-control' }, label: false
          %section.col.col-4
            %label.label Provincia
            %label.input{for: "province"}
              = f.input :province, input_html: { class: 'form-control' }, label: false
          %section.col.col-4
            %label.label Departamento
            %label.input{for: "department"}
              = f.input :department, input_html: { class: 'form-control' }, label: false
        .row
          %section.col.col-4
            %label.label Licencia de Conducir
            %label.input{for: "driverlicense"}
              %i.icon-append.fa.fa-credit-card
              = f.input :driverlicense, placeholder: "Licencia de Conducir", input_html: { class: 'form-control' }, label: false
          %section.col.col-4
            %label.control-label Estado Civil
            %br
            .input-group
              %select.col-sm-6.form-control#type{:name =>"worker[maritalstatus]", :required => true, title:'No puede dejar este campo vacio', 'style' => 'width:200px' }
                -if @action = 'edit'
                  %option{:value => "0"} Seleccione un estado
                  %option{:value => "soltero", :selected => "#{@worker.maritalstatus}"=="soltero"} Soltero
                  %option{:value => "casado", :selected => "#{@worker.maritalstatus}"=="casado"} Casado
                  %option{:value => "divorciado", :selected => "#{@worker.maritalstatus}"=="divorciado"} Divorciado
                  %option{:value => "viudo", :selected => "#{@worker.maritalstatus}"=="viudo"} Viudo
                -else
                  %option{:value => "0", :selected => 'selected'} Seleccione un estado
                  %option{:value => "soltero"} Soltero
                  %option{:value => "casado"} Casado
                  %option{:value => "divorciado"} Divorciado
                  %option{:value => "viudo"} Viudo
        .row
          %section.col.col-4
            %label.control-label AFP
            %br
            .input-group
              %select.col-sm-6.form-control#type{:name =>"worker[afp_id]", :required => true, title:'No puede dejar este campo vacio', 'style' => 'width:200px' }
                - @afp.each do |afp|
                  - if @worker.afp_id == afp.id
                    %option{:value => "#{afp.id}", :selected => true}
                      = afp.enterprise
                  - else
                    %option{:value => "#{afp.id}"}
                      = afp.enterprise
          %section.col.col-4
            %label.control-label Tipo AFP
            %br
            .input-group
              %select.col-sm-6.form-control#type{:name =>"worker[afptype]", :required => true, title:'No puede dejar este campo vacio', 'style' => 'width:200px' }
                -if @action = 'edit'
                  %option{:value => "0"} Seleccione un tipo
                  %option{:value => "mixto", :selected => "#{@worker.afptype}"=="mixto"} Mixto
                  %option{:value => "comision", :selected => "#{@worker.afptype}"=="comision"} Comisión
                -else
                  %option{:value => "0", :selected => 'selected'} Seleccione un tipo
                  %option{:value => "mixto"} Mixto
                  %option{:value => "comision"} Comisión
          %section.col.col-4
            %label.label Número de Carnet
            %label.input{for: "afpnumber"}
              %i.icon-append.fa.fa-credit-card
              = f.input :afpnumber, placeholder: "Número de Carnet", input_html: { class: 'form-control' }, label: false

      %fieldset
        %legend Bancos
        .row
          %section.col.col-2
            %label.control-label(for="bank_id") Bancos

          %section.col.col-3
            %select#bank-select.select2.form-control(style='width:100%;padding: 0;border: none;') 
              - @banks.each do |bank|
                %option(value = "#{bank.id}")
                  = bank.business_name

          %section.col.col-3
            = text_field_tag 'account_number', nil, class: 'form-control', id: 'bank-account_number', placeholder: 'Numero de Cuenta'


          %section.col.col-2
            %div
              %a(href="javascript:add_bank_item();" id="btn-add-bank" class="btn btn-success" role="button")
                Agregar Banco

        .col-lg-12
          %table#summary-workers.table.table-striped.table-bordered.table-hover.has-tickbox.smart-form
            %thead
              %tr
                %th.col-2 Nombre
                %th.col-5 Numero de Cuenta
                %th Eliminar
            %tbody(id="bank_items_table")
              - if @action == 'edit'
                - puts @worker.worker_details
                - @worker.worker_details.each do |oos|
                  %tr
                    %td.bank-id(style="display:none")
                      = hidden_field_tag 'worker[worker_details_attributes][' + @reg_n.to_s + '][bank_id]', oos.bank.id
                    %td.col-2=oos.bank.business_name
                    %td.col-5.account_number
                      = text_field_tag 'worker[worker_details_attributes][' + @reg_n.to_s + '][account_number]', oos.account_number, class: "form-control account_number-item", onkeypress: "return isNumber(event);"
                    %td(style="display:none")
                      = hidden_field_tag 'worker[worker_details_attributes][' + @reg_n.to_s + '][id]', oos.id
                    %td(style="display:none")
                      = hidden_field_tag 'worker[worker_details_attributes][' + @reg_n.to_s + '][worker_id]', @worker.id
                    %td.delete-item
                      %label.checkbox
                        = check_box 'worker[worker_details_attributes]', '[' + @reg_n.to_s + '][_destroy]'
                        %i
                    - @reg_n += 1

      %fieldset
        %legend Datos familiares
        .row
          %section.col.col-2
            %label.control-label(for="familiar_id") Familiares
        .row
          %section.col.col-3
            = text_field_tag 'paternal_surname', nil, class: 'form-control', id: 'familiar-paternal_surname', placeholder: 'Apellido Paterno'
          %section.col.col-3
            = text_field_tag 'maternal_surname', nil, class: 'form-control', id: 'familiar-maternal_surname', placeholder: 'Apellido Materno'
          %section.col.col-3
            = text_field_tag 'names', nil, class: 'form-control', id: 'familiar-names', placeholder: 'Nombres'
          %section.col.col-3
            = text_field_tag 'dni', nil, class: 'form-control', id: 'familiar-dni', placeholder: 'DNI'
        .row
          %section.col.col-3
            = text_field_tag 'relationship', nil, class: 'form-control', id: 'familiar-relationship', placeholder: 'Parentesco'
          %section.col.col-3
            %label Fecha de Nacimiento
            %input#familiar-dayofbirth.string.optional.form-control{'name'=>'dayofbirth', type: "date"}

          %section.col.col-2
            %div
              %a(href="javascript:add_familiar_item();" id="btn-add-familiar" class="btn btn-success" role="button")
                Agregar Familiar

        .col-lg-13
          %table#summary-workers.table.table-striped.table-bordered.table-hover.has-tickbox.smart-form
            %thead
              %tr
                %th.col-2 Apellido Paterno
                %th.col-2 Apellido Materno
                %th.col-2 Nombres
                %th.col-2 Parentesco
                %th.col-2 Fecha de Nacimiento
                %th.col-2 DNI
                %th Eliminar
            %tbody(id="familiar_items_table")
              - if @action == 'edit'
                - puts @worker.worker_familiars
                - @worker.worker_familiars.each do |oos|
                  %tr
                    %td.col-2=oos.paternal_surname
                    %td.col-2=oos.maternal_surname
                    %td.col-2=oos.names
                    %td.col-2=oos.relationship
                    %td.col-2=oos.dayofbirth
                    %td.col-2=oos.dni
                    %td(style="display:none")
                      = hidden_field_tag 'worker[worker_familiars_attributes][' + @reg_n.to_s + '][id]', oos.id
                    %td(style="display:none")
                      = hidden_field_tag 'worker[worker_familiars_attributes][' + @reg_n.to_s + '][worker_id]', @worker.id
                    %td.delete-item
                      %label.checkbox
                        = check_box 'worker[worker_familiars_attributes]', '[' + @reg_n.to_s + '][_destroy]'
                        %i
                    - @reg_n += 1
      %fieldset
        %legend Estudios
        .row
          %section.col.col-5
            %label.label Colegio Primaria
            %label.input{for: "primaryschool"}
              = f.input :primaryschool, placeholder: "Colegio", input_html: { class: 'form-control' }, label: false
          %section.col.col-3
            %label.label Lugar
            %label.input{for: "primarydistrict"}
              = f.input :primarydistrict, input_html: { class: 'form-control' }, label: false
          %section.col.col-2
            %label.label Desde
            %label.input{for: "primarystartdate"}
              = f.input :primarystartdate, as: :string, input_html: { class: 'form-control', :type => "date"}, label: false
          %section.col.col-2
            %label.label Hasta
            %label.input{for: "primaryenddate"}
              = f.input :primaryenddate, as: :string, input_html: { class: 'form-control', :type => "date"}, label: false
        .row
          %section.col.col-5
            %label.label Colegio Secundaria
            %label.input{for: "highschool"}
              = f.input :highschool, placeholder: "Colegio", input_html: { class: 'form-control' }, label: false
          %section.col.col-3
            %label.label Lugar
            %label.input{for: "highschooldistrict"}
              = f.input :highschooldistrict, input_html: { class: 'form-control' }, label: false
          %section.col.col-2
            %label.label Desde
            %label.input{for: "highschoolstartdate"}
              = f.input :highschoolstartdate, as: :string, input_html: { class: 'form-control', :type => "date"}, label: false
          %section.col.col-2
            %label.label Hasta
            %label.input{for: "highschoolenddate"}
              = f.input :highschoolenddate, as: :string, input_html: { class: 'form-control', :type => "date"}, label: false
        .row
          %section.col.col-5
            %label.label Nivel de instruccion
            %label.input{for: "levelofinstruction"}
              = f.input :levelofinstruction, placeholder: "Nivel de Instruccion", input_html: { class: 'form-control' }, label: false
        .row
          %section.col.col-2
            %label.control-label(for="centerofstudy_id") Universidad / Instituto / Otros estudios
        .row
          %section.col.col-3
            = text_field_tag 'name', nil, class: 'form-control', id: 'centerofstudy-name', placeholder: 'Universidad / Instituto / Otros estudios'
          %section.col.col-3
            = text_field_tag 'profession', nil, class: 'form-control', id: 'centerofstudy-profession', placeholder: 'Profesión'
          %section.col.col-3
            = text_field_tag 'title', nil, class: 'form-control', id: 'centerofstudy-title', placeholder: 'Titulo / Grado'
          %section.col.col-3
            = text_field_tag 'numberoftuition', nil, class: 'form-control', id: 'centerofstudy-numberoftuition', placeholder: 'N° de coleg.'
        .row
          %section.col.col-3
            %label Desde
            %input#centerofstudy-start_date.string.optional.form-control{'name'=>'start_date', type: "date"}
          %section.col.col-3
            %label Hasta
            %input#centerofstudy-end_date.string.optional.form-control{'name'=>'end_date', type: "date"}

          %section.col.col-2
            %div
              %a(href="javascript:add_centerofstudy_item();" id="btn-add-centerofstudy" class="btn btn-success" role="button")
                Agregar Centro de Estudios

        .col-lg-13
          %table#summary-workers.table.table-striped.table-bordered.table-hover.has-tickbox.smart-form
            %thead
              %tr
                %th.col-2 Universidad/Instituto
                %th.col-2 Profesion
                %th.col-2 Título
                %th.col-2 N° de Coleg.
                %th.col-2 Fecha de Comienzo
                %th.col-2 Fecha de Fin
                %th Eliminar
            %tbody(id="centerofstudy_items_table")
              - if @action == 'edit'
                - puts @worker.worker_center_of_studies
                - @worker.worker_center_of_studies.each do |oos|
                  %tr
                    %td.col-2=oos.name
                    %td.col-2=oos.profession
                    %td.col-2=oos.title
                    %td.col-2=oos.numberoftuition
                    %td.col-2=oos.start_date
                    %td.col-2=oos.end_date
                    %td(style="display:none")
                      = hidden_field_tag 'worker[worker_center_of_studies][' + @reg_n.to_s + '][id]', oos.id
                    %td(style="display:none")
                      = hidden_field_tag 'worker[worker_center_of_studies][' + @reg_n.to_s + '][worker_id]', @worker.id
                    %td.delete-item
                      %label.checkbox
                        = check_box 'worker[worker_center_of_studies]', '[' + @reg_n.to_s + '][_destroy]'
                        %i
                    - @reg_n += 1
        .row
          %section.col.col-2
            %label.control-label(for="otherstudy_id")Otros estudios
        .row
          %section.col.col-3
            = text_field_tag 'study', nil, class: 'form-control', id: 'otherstudy-study', placeholder: 'Otros estudios'
          %section.col.col-3
            = text_field_tag 'level', nil, class: 'form-control', id: 'otherstudy-level', placeholder: 'Nivel'

          %section.col.col-2
            %div
              %a(href="javascript:add_otherstudy_item();" id="btn-add-otherstudy" class="btn btn-success" role="button")
                Agregar Otros de Estudios

        .col-lg-13
          %table#summary-workers.table.table-striped.table-bordered.table-hover.has-tickbox.smart-form
            %thead
              %tr
                %th.col-4 Otros Estudios
                %th.col-4 Nivel
                %th Eliminar
            %tbody(id="otherstudy_items_table")
              - if @action == 'edit'
                - puts @worker.worker_otherstudies
                - @worker.worker_otherstudies.each do |oos|
                  %tr
                    %td.col-2=oos.study
                    %td.col-2=oos.level
                    %td(style="display:none")
                      = hidden_field_tag 'worker[worker_otherstudies][' + @reg_n.to_s + '][id]', oos.id
                    %td(style="display:none")
                      = hidden_field_tag 'worker[worker_otherstudies][' + @reg_n.to_s + '][worker_id]', @worker.id
                    %td.delete-item
                      %label.checkbox
                        = check_box 'worker[worker_otherstudies]', '[' + @reg_n.to_s + '][_destroy]'
                        %i
                    - @reg_n += 1
      %fieldset
        %legend Experiencia Laboral
        .row
          %section.col.col-2
            %label.control-label(for="experience_id") Experiencia
        .row
          %section.col.col-6
            = text_field_tag 'businessname', nil, class: 'form-control', id: 'experience-businessname', placeholder: 'Empresa'
          %section.col.col-6
            = text_field_tag 'businessaddress', nil, class: 'form-control', id: 'experience-businessaddress', placeholder: 'Dirección'
        .row
          %section.col.col-3
            = text_field_tag 'title', nil, class: 'form-control', id: 'experience-title', placeholder: 'Cargo'
          %section.col.col-3
            = text_field_tag 'salary', nil, class: 'form-control', id: 'experience-salary', placeholder: 'Sueldo'
          %section.col.col-3
            = text_field_tag 'bossincharge', nil, class: 'form-control', id: 'experience-bossincharge', placeholder: 'Jefe inmediato'
          %section.col.col-3
            = text_field_tag 'exitreason', nil, class: 'form-control', id: 'experience-exitreason', placeholder: 'Motivo de Salida'
        .row
          %section.col.col-3
            %label Desde
            %input#experience-start_date.string.optional.form-control{'name'=>'start_date', type: "date"}
          %section.col.col-3
            %label Hasta
            %input#experience-end_date.string.optional.form-control{'name'=>'end_date', type: "date"}

          %section.col.col-2
            %div
              %a(href="javascript:add_experience_item();" id="btn-add-experience" class="btn btn-success" role="button")
                Agregar Empresa

        .col-lg-13
          %table#summary-workers.table.table-striped.table-bordered.table-hover.has-tickbox.smart-form
            %thead
              %tr
                %th.col-2 Empresa
                %th.col-2 Dirección
                %th.col-2 Cargo
                %th.col-2 Salario
                %th.col-2 Jefe inmediato
                %th.col-2 Motivo de Salida
                %th.col-2 Fecha de Inicio
                %th.col-2 Fecha de Fin
                %th Eliminar
            %tbody(id="experience_items_table")
              - if @action == 'edit'
                - puts @worker.worker_experiences
                - @worker.worker_experiences.each do |oos|
                  %tr
                    %td.col-2=oos.businessname
                    %td.col-2=oos.businessaddress
                    %td.col-2=oos.title
                    %td.col-2=oos.salary
                    %td.col-2=oos.bossincharge
                    %td.col-2=oos.exitreason
                    %td.col-2=oos.start_date
                    %td.col-2=oos.end_date
                    %td(style="display:none")
                      = hidden_field_tag 'worker[worker_experiences][' + @reg_n.to_s + '][id]', oos.id
                    %td(style="display:none")
                      = hidden_field_tag 'worker[worker_experiences][' + @reg_n.to_s + '][worker_id]', @worker.id
                    %td.delete-item
                      %label.checkbox
                        = check_box 'worker[worker_experiences]', '[' + @reg_n.to_s + '][_destroy]'
                        %i
                    - @reg_n += 1
        .row
          %section.col.col-5
            %label.control-label TIENE CONOCIMIENTOS DE NORMAS DE CALIDAD?
            %br
            .input-group
              %select.col-sm-5.form-control#type{:name =>"worker[quality]", :required => true, title:'No puede dejar este campo vacio', :style => "width:200px"}
                -if @action = 'edit'
                  %option{:value => "0"} Seleccione
                  %option{:value => "si", :selected => "#{@worker.quality}"=="si"} Si
                  %option{:value => "no", :selected => "#{@worker.quality}"=="no"} No
                -else
                  %option{:value => "0", :selected => 'selected'} Seleccione
                  %option{:value => "si"} Si
                  %option{:value => "no"} No
          %section.col.col-5
            %label.control-label TIENE CONOCIMIENTOS DE NORMAS DE SEGURIDAD?
            %br
            .input-group
              %select.col-sm-5.form-control#type{:name =>"worker[security]", :required => true, title:'No puede dejar este campo vacio', :style => "width:200px"}
                -if @action = 'edit'
                  %option{:value => "0"} Seleccione
                  %option{:value => "si", :selected => "#{@worker.security}"=="si"} Si
                  %option{:value => "no", :selected => "#{@worker.security}"=="no"} No
                -else
                  %option{:value => "0", :selected => 'selected'} Seleccione
                  %option{:value => "si"} Si
                  %option{:value => "no"} No
        .row
          %section.col.col-5
            %label.control-label TIENE CONOCIMIENTOS DE NORMAS DE MEDIOAMBIENTE?
            %br
            .input-group
              %select.col-sm-5.form-control#type{:name =>"worker[enviroment]", :required => true, title:'No puede dejar este campo vacio', :style => "width:200px"}
                -if @action = 'edit'
                  %option{:value => "0"} Seleccione
                  %option{:value => "si", :selected => "#{@worker.enviroment}"=="si"} Si
                  %option{:value => "no", :selected => "#{@worker.enviroment}"=="no"} No
                -else
                  %option{:value => "0", :selected => 'selected'} Seleccione
                  %option{:value => "si"} Si
                  %option{:value => "no"} No
          %section.col.col-5
            %label.control-label TIENE CONOCIMIENTOS DE LA LEGISLACION LABORAL?
            %br
            .input-group
              %select.col-sm-5.form-control#type{:name =>"worker[labor_legislation]", :required => true, title:'No puede dejar este campo vacio', :style => "width:200px"}
                -if @action = 'edit'
                  %option{:value => "0"} Seleccione
                  %option{:value => "si", :selected => "#{@worker.labor_legislation}"=="si"} Si
                  %option{:value => "no", :selected => "#{@worker.labor_legislation}"=="no"} No
                -else
                  %option{:value => "0", :selected => 'selected'} Seleccione
                  %option{:value => "si"} Si
                  %option{:value => "no"} No
        .row
          %section.col.col-4
            %label.label Numero de Hijos
            %label.input{for: "numberofchilds"}
              = f.input :numberofchilds, input_html: { class: 'form-control' }, label: false
      %fieldset
        %legend Documentación Adjunta
        .row
          %section.col.col-md-12
            .col-md-5
              %label.label Curriculum Vitae Documentado o
              %label.label Constacias de Trabajo o Certifidaco de Calificacion
            .col-md-7
              = f.input :cv, :input_html => { :class => 'btn btn-default' }, label: false, as: "file"
              %p.help-block.col-md-
                - if @action == 'edit' && @worker.cv.exists?
                  = 'Archivo subido: ' + File.basename(@worker.cv.path, File.extname(@worker.cv.path))
                - else
                  Subir el archivo correspondiente
        .row
          %section.col.col-md-12
            .col-md-5
              %label.label Certificado de Antecedentes Policiales
            .col-md-7
              = f.input :antecedent_police, :input_html => { :class => 'btn btn-default' }, label: false, as: "file"
              %p.help-block
                - if @action == 'edit' && @worker.antecedent_police.exists?
                  = 'Archivo subido: ' + File.basename(@worker.antecedent_police.path, File.extname(@worker.antecedent_police.path))
                - else
                  Subir el archivo correspondiente
        .row
          %section.col.col-md-12
            .col-md-5
              %label.label Documento Nacional de Identidad
            .col-md-7
              = f.input :dni, :input_html => { :class => 'btn btn-default' }, label: false, as: "file"
              %p.help-block
                - if @action == 'edit' && @worker.dni.exists?
                  = 'Archivo subido: ' + File.basename(@worker.dni.path, File.extname(@worker.dni.path))
                - else
                  Subir el archivo correspondiente
        .row
          %section.col.col-md-12
            .col-md-5
              %label.label Carta de Deposito de C.T.S.
            .col-md-7
              = f.input :cts_deposit_letter, :input_html => { :class => 'btn btn-default' }, label: false, as: "file"
              %p.help-block
                - if @action == 'edit' && @worker.cts_deposit_letter.exists?
                  = 'Archivo subido: ' + File.basename(@worker.cts_deposit_letter.path, File.extname(@worker.cts_deposit_letter.path))
                - else
                  Subir el archivo correspondiente
        .row
          %section.col.col-md-12
            .col-md-5
              %label.label Carta de Fondos Previsionales
            .col-md-7
              = f.input :pension_funds_letter, :input_html => { :class => 'btn btn-default' }, label: false, as: "file"
              %p.help-block
                - if @action == 'edit' && @worker.pension_funds_letter.exists?
                  = 'Archivo subido: ' + File.basename(@worker.pension_funds_letter.path, File.extname(@worker.pension_funds_letter.path))
                - else
                  Subir el archivo correspondiente
        .row
          %section.col.col-md-12
            .col-md-5
              %label.label Declaración Jurada
            .col-md-7
              = f.input :affidavit, :input_html => { :class => 'btn btn-default' }, label: false, as: "file"
              %p.help-block
                - if @action == 'edit' && @worker.affidavit.exists?
                  = 'Archivo subido: ' + File.basename(@worker.affidavit.path, File.extname(@worker.affidavit.path))
                - else
                  Subir el archivo correspondiente

        .row
          %section.col.col-md-12
            .col-md-5
              %label.label Certificado de Convivencia / Partida de Matrimonio
            .col-md-7
              = f.input :marriage_certificate, :input_html => { :class => 'btn btn-default' }, label: false, as: "file"
              %p.help-block.col-md-
                - if @action == 'edit' && @worker.marriage_certificate.exists?
                  = 'Archivo subido: ' + File.basename(@worker.marriage_certificate.path, File.extname(@worker.marriage_certificate.path))
                - else
                  Subir el archivo correspondiente

        .row
          %section.col.col-md-12
            .col-md-5
              %label.label Partida de Nacimiento de Hijos
            .col-md-7
              = f.input :birth_certificate_of_childer, :input_html => { :class => 'btn btn-default' }, label: false, as: "file"
              %p.help-block.col-md-
                - if @action == 'edit' && @worker.birth_certificate_of_childer.exists?
                  = 'Archivo subido: ' + File.basename(@worker.birth_certificate_of_childer.path, File.extname(@worker.birth_certificate_of_childer.path))
                - else
                  Subir el archivo correspondiente

        .row
          %section.col.col-md-12
            .col-md-5
              %label.label DNI Hijos y Esposa
            .col-md-7
              = f.input :dni_wife_kids, :input_html => { :class => 'btn btn-default' }, label: false, as: "file"
              %p.help-block.col-md-
                - if @action == 'edit' && @worker.dni_wife_kids.exists?
                  = 'Archivo subido: ' + File.basename(@worker.dni_wife_kids.path, File.extname(@worker.dni_wife_kids.path))
                - else
                  Subir el archivo correspondiente

        .row
          %section.col.col-md-12
            .col-md-5
              %label.label Constancia de Matricula (Asig. Escolar)
            .col-md-7
              = f.input :schoolar_certificate, :input_html => { :class => 'btn btn-default' }, label: false, as: "file"
              %p.help-block.col-md-
                - if @action == 'edit' && @worker.schoolar_certificate.exists?
                  = 'Archivo subido: ' + File.basename(@worker.schoolar_certificate.path, File.extname(@worker.schoolar_certificate.path))
                - else
                  Subir el archivo correspondiente
      %footer
        %button.btn.btn-primary{type: "submit"}
          %i.fa.fa-save 
          Guardar

:javascript
  $(document).ready(function () {
    $('select').select2();

    if($('form[id^="edit_"]').length > 0) {
      submit_validate($('form[id^="edit_"]'));
    }else{
      submit_validate($('#new_worker'));
    }

  });
  
  function submit_validate(form){    
    loadScript("#{ asset_path 'plugin/select2/select2.min.js', type: :javascript }");
    $('#bank-select').select2();
    $(form['selector']).ajaxForm({
      beforeSubmit: function() {
        $(form['selector']).validate({
          // Rules for form validation
          rules : {
            'worker[category_of_worker_id]' : {
              required : true,
            },
            'worker[first_name]' : {
              required : true,
            },
            'worker[second_name]' : {
              required : true,
            },
            'worker[paternal_surname]' : {
              required : true,
            },
            'worker[maternal_surname]' : {
              required : true,
            }
          },

          // Messages for form validation
          messages : {
            'worker[category_of_worker_id]' : {
              required : 'Por favor, ingresar la categoria del trabajador.'
            },
            'worker[first_name]' : {
              required : 'Por favor, ingresar el primer nombre.'
            },
            'worker[second_name]' : {
              required : 'Por favor, ingresar el segundo nombre.'
            },
            'worker[paternal_surname]' : {
              required : 'Por favor, ingresar el apellido Paterno.'
            },
            'worker[maternal_surname]' : {
              required : 'Por favor, ingresar el apellido Materno.'
            }
          },

          // Do not change code below
          errorPlacement : function(error, element) {
            error.insertAfter(element.parent());
          }
        });
        // Remove all Help-inLine
        $(".help-inline").remove();
        // Client Valid
        return $(form['selector']).valid();
      },
      target: '#content',
      success: function (data){
        $(".help-inline").parent().addClass("state-error");
      },
      error: function(xhr, status, error) {
      }
    });
  }

  function isNumber(evt) {
    evt = (evt) ? evt : window.event;
    var charCode = (evt.which) ? evt.which : evt.keyCode;
    if (charCode > 31 && (charCode < 48 || charCode > 57) && charCode != 45) {
        return false;
    }
    return true;
  }

  function add_bank_item(){
    var bank_id = $("#bank-select").val();
    str_item = {authenticity_token: "#{form_authenticity_token}", bank_id: $("#bank-select").val(), account_number: $("#bank-account_number").val()};

    append_url_ajax('#{add_worker_item_field_production_workers_path}', 'bank_items_table', str_item, 0, 'POST');
  }

  function add_familiar_item(){
    str_item = {authenticity_token: "#{form_authenticity_token}", paternal_surname: $("#familiar-paternal_surname").val(), maternal_surname: $("#familiar-maternal_surname").val(), names: $("#familiar-names").val(), relationship: $("#familiar-relationship").val(), dayofbirth: $("#familiar-dayofbirth").val(), dni: $("#familiar-dni").val()};

    append_url_ajax('#{add_familiar_item_field_production_workers_path}', 'familiar_items_table', str_item, 0, 'POST');
  }

  function add_centerofstudy_item(){
    str_item = {authenticity_token: "#{form_authenticity_token}", nameu: $("#centerofstudy-name").val(), profession: $("#centerofstudy-profession").val(), title: $("#centerofstudy-title").val(), numberoftuition: $("#centerofstudy-numberoftuition").val(), start_date: $("#centerofstudy-start_date").val(), end_date: $("#centerofstudy-end_date").val()};

    append_url_ajax('#{add_centerofstudy_item_field_production_workers_path}', 'centerofstudy_items_table', str_item, 0, 'POST');
  }

  function add_experience_item(){
    str_item = {authenticity_token: "#{form_authenticity_token}", businessname: $("#experience-businessname").val(), businessaddress: $("#experience-businessaddress").val(), title2: $("#experience-title").val(), salary: $("#experience-salary").val(), bossincharge: $("#experience-bossincharge").val(), exitreason: $("#experience-exitreason").val(), start_date2: $("#experience-start_date").val(), end_date2: $("#experience-end_date").val()};

    append_url_ajax('#{add_experience_item_field_production_workers_path}', 'experience_items_table', str_item, 0, 'POST');
  }

  function add_otherstudy_item(){
    str_item = {authenticity_token: "#{form_authenticity_token}", study: $("#otherstudy-study").val(), level: $("#otherstudy-level").val()};

    append_url_ajax('#{add_otherstudy_item_field_production_workers_path}', 'otherstudy_items_table', str_item, 0, 'POST');
  }

  function delete_item(code){
    $("#tr" + code).remove();
  }

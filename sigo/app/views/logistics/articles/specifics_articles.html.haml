#content
  .row
    .col-lg-12
      %h1.page-title.txt-color-blueDark
        %i.fa.fa-pencil-square-o.fa-fw 
        - if !@cost_center.nil?
          = "Lista de Articulos del Centro de Costo: #{@cost_center.name}"
        - else
          = "Lista de Articulos"

  - if @budget != nil
    .row
      .col-sm-4
        %button.btn.btn-primary.btn-mini{:onclick => "javascript:load_url_ajax('#{ new_specific_logistics_articles_path}', 'content', null, null, 'GET')"}
          Agregar Articulo
  - else
    .alert.alert-block.alert-danger
      %a.close(data-dismiss="alert" href="#")
        ×
      %h4.alert-heading
        %i.fa.fa-lock
          No puedes crear Artículos!
      %p
        Verifica si tienes, por lo menos, 1 presupuesto meta importado
  %br
  .row
  #widget-grid
    .row
      %article.col-xs-12.col-sm-12.col-md-12.col-lg-12
        #wid-id-0.jarviswidget.jarviswidget-color-darken{"data-widget-editbutton" => "false"}
          %header
            %span.widget-icon
              %i.fa.fa-table
            %h2
              - if !@cost_center.nil?
                = "Lista de Articulos del Centro de Costo: #{@cost_center.name}"
              - else
                = "Lista de Articulos"
          / widget div
          %div
            / widget edit box
            .jarviswidget-editbox
              / This area used as dropdown edit box
            / end widget edit box
            / widget content
            .widget-body.no-padding
              .widget-body-toolbar
              %table#dt_basic.table.table-striped.table-bordered.table-hover
                %thead
                  %tr
                    %th Código
                    %th Tipo de Artículo
                    %th Nombre
                    %th Descripcion
                    %th Unidad de Medida
                    %th Acciones
                %tbody
                      
- if !@cost_center.nil?
  :javascript
    // DO NOT REMOVE : GLOBAL FUNCTIONS!
    pageSetUp();
    
    $(document).ready(function () {
      $('[data-toggle="confirmation"]').confirmation();
    });
    // PAGE RELATED SCRIPTS
    loadDataTableScripts();
    function loadDataTableScripts() {
      loadScript("#{ asset_path 'plugin/datatables/jquery.dataTables-cust.min', type: :javascript }", dt_2);
      function dt_2() {
        loadScript("#{ asset_path 'plugin/datatables/ColReorder.min', type: :javascript }", dt_3);
      }
      function dt_3() {
        loadScript("#{ asset_path 'plugin/datatables/FixedColumns.min.js', type: :javascript }", dt_4);
      }
      function dt_4() {
        loadScript("#{ asset_path 'plugin/datatables/ColVis.min', type: :javascript }", dt_5);
      }
      function dt_5() {
        loadScript("#{ asset_path 'plugin/datatables/ZeroClipboard', type: :javascript }", dt_6);
      }
      function dt_6() {
        loadScript("#{ asset_path 'plugin/datatables/media/js/TableTools.min', type: :javascript }", dt_7);
      }
      function dt_7() {
        loadScript("#{ asset_path 'plugin/datatables/DT_bootstrap', type: :javascript }", runDataTables);
      }
    }

    function runDataTables() {
      $('#dt_basic').dataTable({
        bProcessing  : true,
        sProcessing  : true,
        bServerSide  : true,
        sServerMethod: 'POST',
        sAjaxSource  : "#{json_articles_from_specific_article_table_logistics_articles_path}",
        fnServerParams: function ( aoData ) {
          aoData.push( {"name": "authenticity_token", "value": "#{form_authenticity_token}" } );
        },
        sPaginationType : 'bootstrap_full'
      });

      $("#dt_basic_filter div input").keyup(function() {
        oTable.fnFilter(this.value, oTable.oApi._fnVisibleToColumnIndex(oTable.fnSettings(), $("thead input").index(this)));
      });
    }

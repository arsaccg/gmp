- @arrItems.each do |x|
  - @article = x.article
  %tr{id: "tr" + @reg_n.to_s}
    %td(style="display:none")
      = hidden_field_tag 'stock_input[stock_input_details_attributes][' + @reg_n.to_s + '][id]', x.id
    %td(style="display:none")
      = hidden_field_tag 'stock_input[stock_input_details_attributes][' + @reg_n.to_s + '][article_id]', @article.id
    %td
      = @article.code
    %td
      = @article.name
    %td
      = @article.unit_of_measurement.symbol
    %td.unit-price
      = text_field_tag 'stock_input[stock_input_details_attributes][' + @reg_n.to_s + '][amount]', nil, class: "form-control unit-price", value: x.amount, onkeypress: "return isNumber(event);", onchange: "this.value = minmax(this.value, 1, #{x.amount})"
    %td
      %div
        %select.form-control{:name =>"stock_input[stock_input_details_attributes][#{@reg_n.to_s}][sector_id]", :required => true, title:'No puede dejar este campo vacio'}
          %option{:selected => true, :disabled => true} Seleccionar Sector
          - @sectors.each do |sect|
            %optgroup{:label => "#{sect.name}"}
              -Sector.getSubSectors(sect.code, @cost_center).each do |subsector|
                %option{:value => "#{subsector.id}", :selected => x.sector_id == subsector.id }          
                  = sect.name
    %td
      %div
        %select.form-control{:name =>"stock_input[stock_input_details_attributes][#{@reg_n.to_s}][phase_id]", :required => true, title:'No puede dejar este campo vacio'}
          %option{:selected => true, :disabled => true} Seleccionar Fase
          - @phases.each do |phase|
            - if phase.id == x.phase_id
              %option{:value => "#{phase.id}", :selected => true}
                = phase.name
            - else
              %option{:value => "#{phase.id}"}
                = phase.name
    %td.delete-item
      %label.checkbox
        = check_box 'stock_input', '[stock_input_details_attributes][' + @reg_n.to_s + '][_destroy]'
        %i
  - @reg_n += 1
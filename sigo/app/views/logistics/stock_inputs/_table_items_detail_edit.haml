- @arrItems.each do |x|
  - @pod = x.purchase_order_detail
  - @article = x.purchase_order_detail.delivery_order_detail.article
  - @pending = @pod.amount.to_f - PurchaseOrderDetail.get_total_received(@pod.id).to_f + x.amount.to_f
  %tr{id: "tr" + @reg_n.to_s}
    %td(style="display:none" class="pod-di")
      = hidden_field_tag 'stock_input[stock_input_details_attributes][' + @reg_n.to_s + '][purchase_order_detail_id]', @pod.id.to_i
    %td(style="display:none")
      = hidden_field_tag 'stock_input[stock_input_details_attributes][' + @reg_n.to_s + '][id]', x.id
    %td
      = x.purchase_order_detail.purchase_order.code    
    %td
      = @article.code
    %td
      = @article.name
    %td
      = @article.unit_of_measurement.symbol
    %td.amount
      = @pod.amount
    %td.pending
      = @pending
    %td.unit-price
      = text_field_tag 'stock_input[stock_input_details_attributes][' + @reg_n.to_s + '][amount]', nil, class: "form-control unit-price", value: x.amount, onkeypress: "return isNumber(event);", onchange: "this.value = minmax(this.value, 0.01, #{@pending})"
    %td.delete-item
      %label.checkbox
        = check_box 'stock_input', '[stock_input_details_attributes][' + @reg_n.to_s + '][_destroy]'
        %i
  - @reg_n += 1
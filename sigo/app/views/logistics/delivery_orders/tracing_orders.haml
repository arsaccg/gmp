#content-inside
  .row
    .col-xs-12.col-sm-7.col-md-7.col-lg-4
      %h1.page-title.txt-color-blueDark
        %i.fa.fa-pencil-square-o.fa-fw
        Seguimiento de las Ordenes
  .row
    .col-xs-12.col-sm-7.col-md-7.col-lg-4
      %div
        .smart-form
          %section
            %label.select
              %select{ 'name' => 'cost_center_id', 'id' => 'cost-center-selected' }
                - @costcenters.each do |cc|
                  %option{'value' => "#{cc.id}"}= cc.name
              %i
  #widget-grid
    .row
      %article.col-xs-12.col-sm-12.col-md-12.col-lg-12
        = render :partial => 'table_items_pending'

:javascript
  // DO NOT REMOVE : GLOBAL FUNCTIONS!
  pageSetUp();
  
  // PAGE RELATED SCRIPTS

  function runDataTables() {

    /* BASIC */
    var oTable = $('#items-pending-requested').dataTable({
      "sPaginationType" : "bootstrap_full"
    });

    /* END BASIC */

    /* END TABLE TOOLS */

  }

  loadDataTableScripts();
  function loadDataTableScripts() {

    loadScript("#{ asset_path 'plugin/datatables/jquery.dataTables-cust.min', type: :javascript }", dt_2);

    function dt_2() {
      loadScript("#{ asset_path 'plugin/datatables/ColReorder.min', type: :javascript }", dt_3);
    }

    function dt_3() {
      loadScript("#{ asset_path 'plugin/datatables/FixedColumns.min.js', type: :javascript }", dt_4);
    }

    function dt_4() {
      loadScript("#{ asset_path 'plugin/datatables/ColVis.min', type: :javascript }", dt_5);
    }

    function dt_5() {
      loadScript("#{ asset_path 'plugin/datatables/ZeroClipboard', type: :javascript }", dt_6);
    }

    function dt_6() {
      loadScript("#{ asset_path 'plugin/datatables/media/js/TableTools.min', type: :javascript }", dt_7);
    }

    function dt_7() {
      loadScript("#{ asset_path 'plugin/datatables/DT_bootstrap', type: :javascript }", runDataTables);
    }

  }

- if @costcenters.first != nil

  :javascript

    $(document).ready(function(){

      $('#cost-center-selected').focus();

      load_items_delivery_order_ajax('#{show_rows_delivery_orders_logistics_delivery_orders_path}', 'body-items-pending-requested', {company_id: $.company_global_id, cost_center_id: $("#cost-center-selected").val(), authenticity_token: "#{form_authenticity_token}", pending: true});

      $('#cost-center-selected').change(function(){
        load_items_delivery_order_ajax('#{show_rows_delivery_orders_logistics_delivery_orders_path}', 'body-items-pending-requested', {company_id: $.company_global_id, cost_center_id: this.value, authenticity_token: "#{form_authenticity_token}", pending: true});
      });
    });
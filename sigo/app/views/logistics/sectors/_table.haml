/ NEW WIDGET START
%article.col-sm-12.col-md-12.col-lg-12
  / Widget ID (each widget will need unique ID)
  #wid-id-1.jarviswidget.jarviswidget-color-blue{"data-widget-editbutton" => "false", "data-widget-sortable" => "false", "data-widget-deletebutton" => "false"}
    /
      widget options:
      usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">
      
      data-widget-colorbutton="false"
      data-widget-editbutton="false"
      data-widget-togglebutton="false"
      
      data-widget-fullscreenbutton="false"
      data-widget-custombutton="false"
      data-widget-collapsed="true"
      
    %header
      %span.widget-icon
        %i.fa.fa-sitemap
      %h2 Sectores/SubSectores
    / widget div
    %div
      / widget edit box
      .jarviswidget-editbox
        / This area used as dropdown edit box
      / end widget edit box
      / widget content
      .widget-body
        .tree.smart-form
          - @Sectors.each do |sector|
            %ul
              %li
                %span
                  %i.fa.fa-lg.fa-folder-open
                  = sector.name + " (cod. " + sector.code + ")"
                  %a.btn.btn-warning.btn-xs{:onclick => "javascript:load_url_ajax('#{edit_logistics_sector_path(sector.id)}', 'content', null, null, 'GET')"}
                    Editar
                  %a.btn.btn-danger.btn-xs{:data => {:toggle => 'confirmation', :placement => 'left', :title => 'Esta seguro de eliminar el item ' + "#{sector.name}?", :singleton => 'true', :popout => 'true', :onclick => "javascript:delete_to_url('#{logistics_sector_path(sector.id)}' + '?authenticity_token=#{form_authenticity_token}', 'content', '#{logistics_sectors_path}')"}}
                    Eliminar
                %ul
                  - Sector.getSubSectors(sector.code, @cost_center).each do |subsector|
                    %li
                      %span
                        %i.fa.fa-lg.fa-book
                        = subsector.name + " (cod. " + subsector.code + ")"
                        %a.btn.btn-warning.btn-xs{:onclick => "javascript:load_url_ajax('#{edit_logistics_sector_path(subsector.id)}', 'content', {subsector: 1}, null, 'GET')"}
                          Editar
                        %a.btn.btn-danger.btn-xs{:data => {:toggle => 'confirmation', :placement => 'left', :title => 'Esta seguro de eliminar el item ' + "#{subsector.name}?", :singleton => 'true', :popout => 'true', :onclick => "javascript:delete_to_url('#{logistics_sector_path(subsector.id)}' + '?authenticity_token=#{form_authenticity_token}', 'content', '#{logistics_sectors_path}')"}}
                          Eliminar
      / end widget content
    / end widget div
  / end widget
/ WIDGET END

:javascript
  // DO NOT REMOVE : GLOBAL FUNCTIONS!
  pageSetUp();

  $(document).ready(function () {
    $('[data-toggle="confirmation"]').confirmation();
  });
  // PAGE RELATED SCRIPTS

  $('.tree > ul').attr('role', 'tree').find('ul').attr('role', 'group');
  $('.tree').find('li:has(ul)').addClass('parent_li').attr('role', 'treeitem').find(' > span').attr('title', 'Collapse this branch').on('click', function(e) {
    var children = $(this).parent('li.parent_li').find(' > ul > li');
    if (children.is(':visible')) {
      children.hide('fast');
      $(this).attr('title', 'Expand this branch').find(' > i').removeClass().addClass('fa fa-lg fa-plus-circle');
    } else {
      children.show('fast');
      $(this).attr('title', 'Collapse this branch').find(' > i').removeClass().addClass('fa fa-lg fa-minus-circle');
    }
    e.stopPropagation();
  });
#wid-id-0.jarviswidget.jarviswidget-color-darken{"data-widget-editbutton" => "false"}
  %header
    %span.widget-icon
      %i.fa.fa-table
    %h2 Lista de Trabajadores
  %div
    .jarviswidget-editbox
    .widget-body.no-padding
      .widget-body-toolbar
      %table#dt_basic.table.table-striped.table-bordered.table-hover
        %thead
          %tr
            %th NÂ°
            %th DNI
            %th Nombres
            %th Apellido Paterno
            %th Apellido Materno
            %th Acciones
        %tbody

:javascript
  // DO NOT REMOVE : GLOBAL FUNCTIONS!
  pageSetUp();

  $(document).ready(function () {
    $('[data-toggle="confirmation"]').confirmation();
  });

  // PAGE RELATED SCRIPTS

  loadDataTableScripts();
  function loadDataTableScripts() {

    loadScript("#{ asset_path 'plugin/datatables/jquery.dataTables-cust.min', type: :javascript }", dt_2);

    function dt_2() {
      loadScript("#{ asset_path 'plugin/datatables/ColReorder.min', type: :javascript }", dt_3);
    }

    function dt_3() {
      loadScript("#{ asset_path 'plugin/datatables/FixedColumns.min.js', type: :javascript }", dt_4);
    }

    function dt_4() {
      loadScript("#{ asset_path 'plugin/datatables/ColVis.min', type: :javascript }", dt_5);
    }

    function dt_5() {
      loadScript("#{ asset_path 'plugin/datatables/ZeroClipboard', type: :javascript }", dt_6);
    }

    function dt_6() {
      loadScript("#{ asset_path 'plugin/datatables/media/js/TableTools.min', type: :javascript }", dt_7);
    }

    function dt_7() {
      loadScript("#{ asset_path 'plugin/datatables/DT_bootstrap', type: :javascript }", runDataTables);
    }

  }

  function runDataTables() {

    $('#dt_basic').dataTable({
      sPaginationType : 'bootstrap_full'
    });

    $("#dt_basic_filter div input").keyup(function() {
      oTable.fnFilter(this.value, oTable.oApi._fnVisibleToColumnIndex(oTable.fnSettings(), $("thead input").index(this)));
    });
  }

  function RefreshTable() {
    var week_id = $('#payslips').val();
    $.post("#{show_workers_payrolls_payrolls_path}", { w: week_id, authenticity_token: "#{form_authenticity_token}" }, function( json ) {
      table = $('#dt_basic').dataTable();
      oSettings = table.fnSettings();

      table.fnClearTable(this);

      for (var i=0; i<json.aaData.length; i++)
      {
        table.oApi._fnAddData(oSettings, json.aaData[i]);
      }

      oSettings.aiDisplay = oSettings.aiDisplayMaster.slice();
      table.fnDraw();
    });
  }